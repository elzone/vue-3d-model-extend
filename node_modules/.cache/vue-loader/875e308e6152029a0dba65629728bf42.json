{"remainingRequest":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/model-mixin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/model-mixin.vue","mtime":1644767682045},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgewogIE9iamVjdDNELAogIFZlY3RvcjIsCiAgVmVjdG9yMywKICBDb2xvciwKICBTY2VuZSwKICBSYXljYXN0ZXIsCiAgV2ViR0xSZW5kZXJlciwKICBQZXJzcGVjdGl2ZUNhbWVyYSwKICBBbWJpZW50TGlnaHQsCiAgUG9pbnRMaWdodCwKICBIZW1pc3BoZXJlTGlnaHQsCiAgRGlyZWN0aW9uYWxMaWdodCwKICBMaW5lYXJFbmNvZGluZywKfSBmcm9tICd0aHJlZSc7CmltcG9ydCB7IE9yYml0Q29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scyc7CmltcG9ydCB7IGdldFNpemUsIGdldENlbnRlciB9IGZyb20gJy4vdXRpbCc7Cgpjb25zdCBzdXBvcnRXZWJHTCA9ICgoKSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgcmV0dXJuICEhKHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgJiYgKGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKSkpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0pKCk7Cgpjb25zdCBERUZBVUxUX0dMX09QVElPTlMgPSB7CiAgYW50aWFsaWFzOiB0cnVlLAogIGFscGhhOiB0cnVlLAp9OwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBzcmM6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgIH0sCiAgICBoZWlnaHQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgfSwKICAgIHBvc2l0aW9uOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAwLCB6OiAwIH07CiAgICAgIH0sCiAgICB9LAogICAgcm90YXRpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHo6IDAgfTsKICAgICAgfSwKICAgIH0sCiAgICBzY2FsZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsgeDogMSwgeTogMSwgejogMSB9OwogICAgICB9LAogICAgfSwKICAgIGxpZ2h0czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAogICAgY2FtZXJhUG9zaXRpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHo6IDAgfTsKICAgICAgfSwKICAgIH0sCiAgICBjYW1lcmFSb3RhdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCwgejogMCB9OwogICAgICB9LAogICAgfSwKICAgIGNhbWVyYVVwOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgIH0sCiAgICBjYW1lcmFMb29rQXQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgfSwKICAgIGJhY2tncm91bmRDb2xvcjogewogICAgICBkZWZhdWx0OiAweGZmZmZmZiwKICAgIH0sCiAgICBiYWNrZ3JvdW5kQWxwaGE6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxLAogICAgfSwKICAgIGNvbnRyb2xzT3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICB9LAogICAgY3Jvc3NPcmlnaW46IHsKICAgICAgZGVmYXVsdDogJ2Fub255bW91cycsCiAgICB9LAogICAgcmVxdWVzdEhlYWRlcjogewogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwKICAgIH0sCiAgICBvdXRwdXRFbmNvZGluZzogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IExpbmVhckVuY29kaW5nLAogICAgfSwKICAgIGdsT3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN1cG9ydFdlYkdMLAogICAgICBzaXplOiB7CiAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsCiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCwKICAgICAgfSwKICAgICAgb2JqZWN0OiBudWxsLAogICAgICByYXljYXN0ZXI6IG5ldyBSYXljYXN0ZXIoKSwKICAgICAgbW91c2U6IG5ldyBWZWN0b3IyKCksCiAgICAgIGNhbWVyYTogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCAxLCAwLjAxLCAxMDAwMDApLAogICAgICBzY2VuZTogbmV3IFNjZW5lKCksCiAgICAgIHdyYXBwZXI6IG5ldyBPYmplY3QzRCgpLAogICAgICByZW5kZXJlcjogbnVsbCwKICAgICAgY29udHJvbHM6IG51bGwsCiAgICAgIGFsbExpZ2h0czogW10sCiAgICAgIGNsb2NrOiB0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICd1bmRlZmluZWQnID8gRGF0ZSA6IHBlcmZvcm1hbmNlLAogICAgICByZXFJZDogbnVsbCwgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGlkCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhhc0xpc3RlbmVyKCkgewogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqLwogICAgICBjb25zdCBldmVudHMgPSB0aGlzLl9ldmVudHM7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHt9OwoKICAgICAgWydvbi1tb3VzZW1vdmUnLCAnb24tbW91c2V1cCcsICdvbi1tb3VzZWRvd24nLCAnb24tbW91c2V3aGVlbCcsICdvbi1jbGljayddLmZvckVhY2goKG5hbWUpID0+IHsKICAgICAgICByZXN1bHRbbmFtZV0gPSAhIWV2ZW50c1tuYW1lXSAmJiBldmVudHNbbmFtZV0ubGVuZ3RoID4gMDsKICAgICAgfSk7CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuaGVpZ2h0ID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5zaXplID0gewogICAgICAgIHdpZHRoOiB0aGlzLiRlbC5vZmZzZXRXaWR0aCwKICAgICAgICBoZWlnaHQ6IHRoaXMuJGVsLm9mZnNldEhlaWdodCwKICAgICAgfTsKICAgIH0KCiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9HTF9PUFRJT05TLCB0aGlzLmdsT3B0aW9ucywgewogICAgICBjYW52YXM6IHRoaXMuJHJlZnMuY2FudmFzLAogICAgfSk7CgogICAgdGhpcy5yZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyKG9wdGlvbnMpOwogICAgdGhpcy5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7CiAgICB0aGlzLnJlbmRlcmVyLm91dHB1dEVuY29kaW5nID0gdGhpcy5vdXRwdXRFbmNvZGluZzsKCiAgICB0aGlzLmNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHModGhpcy5jYW1lcmEsIHRoaXMuJGVsKTsKICAgIHRoaXMuY29udHJvbHMudHlwZSA9ICdvcmJpdCc7CgogICAgdGhpcy5zY2VuZS5hZGQodGhpcy53cmFwcGVyKTsKCiAgICB0aGlzLmxvYWQoKTsKICAgIHRoaXMudXBkYXRlKCk7CgogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93biwgZmFsc2UpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgZmFsc2UpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcy5vbk1vdXNlV2hlZWwsIGZhbHNlKTsKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCBmYWxzZSk7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUsIGZhbHNlKTsKCiAgICB0aGlzLmFuaW1hdGUoKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJlcUlkKTsKCiAgICB0aGlzLnJlbmRlcmVyLmRpc3Bvc2UoKTsKCiAgICBpZiAodGhpcy5jb250cm9scykgewogICAgICB0aGlzLmNvbnRyb2xzLmRpc3Bvc2UoKTsKICAgIH0KCiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAsIGZhbHNlKTsKICAgIHRoaXMuJGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCB0aGlzLm9uTW91c2VXaGVlbCwgZmFsc2UpOwogICAgdGhpcy4kZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIGZhbHNlKTsKCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZSwgZmFsc2UpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHNyYygpIHsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgY2FtZXJhUm90YXRpb246IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICBpZiAoIXRoaXMuY2FtZXJhKSByZXR1cm47CiAgICAgICAgdGhpcy5jYW1lcmEucm90YXRpb24uc2V0KHZhbC54LCB2YWwueSwgdmFsLnopOwogICAgICB9LAogICAgfSwKICAgIGNhbWVyYVBvc2l0aW9uOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhbWVyYSkgcmV0dXJuOwogICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfSwKICAgIH0sCiAgICByb3RhdGlvbjogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5vYmplY3QpIHJldHVybjsKICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGlvbi5zZXQodmFsLngsIHZhbC55LCB2YWwueik7CiAgICAgIH0sCiAgICB9LAogICAgcG9zaXRpb246IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICBpZiAoIXRoaXMub2JqZWN0KSByZXR1cm47CiAgICAgICAgdGhpcy5vYmplY3QucG9zaXRpb24uc2V0KHZhbC54LCB2YWwueSwgdmFsLnopOwogICAgICB9LAogICAgfSwKICAgIHNjYWxlOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLm9iamVjdCkgcmV0dXJuOwogICAgICAgIHRoaXMub2JqZWN0LnNjYWxlLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfSwKICAgIH0sCiAgICBsaWdodHM6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnVwZGF0ZUxpZ2h0cygpOwogICAgICB9LAogICAgfSwKICAgIHNpemU6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnVwZGF0ZUNhbWVyYSgpOwogICAgICAgIHRoaXMudXBkYXRlUmVuZGVyZXIoKTsKICAgICAgfSwKICAgIH0sCiAgICBjb250cm9sc09wdGlvbnM6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7CiAgICAgIH0sCiAgICB9LAogICAgYmFja2dyb3VuZEFscGhhKCkgewogICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVyKCk7CiAgICB9LAogICAgYmFja2dyb3VuZENvbG9yKCkgewogICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVyKCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgb25SZXNpemUoKSB7CiAgICAgIGlmICh0aGlzLndpZHRoID09PSB1bmRlZmluZWQgfHwgdGhpcy5oZWlnaHQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2l6ZSA9IHsKICAgICAgICAgICAgd2lkdGg6IHRoaXMuJGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGVsLm9mZnNldEhlaWdodCwKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbk1vdXNlRG93bihldmVudCkgewogICAgICBpZiAoIXRoaXMuaGFzTGlzdGVuZXJbJ29uLW1vdXNlZG93biddKSByZXR1cm47CgogICAgICBjb25zdCBpbnRlcnNlY3RlZCA9IHRoaXMucGljayhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgICAgdGhpcy4kZW1pdCgnb24tbW91c2Vkb3duJywgaW50ZXJzZWN0ZWQpOwogICAgfSwKICAgIG9uTW91c2VNb3ZlKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tbW91c2Vtb3ZlJ10pIHJldHVybjsKCiAgICAgIGNvbnN0IGludGVyc2VjdGVkID0gdGhpcy5waWNrKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICB0aGlzLiRlbWl0KCdvbi1tb3VzZW1vdmUnLCB7IGNhbWVyYTogdGhpcy5jYW1lcmEsIGludGVyc2VjdGVkIH0pOwogICAgfSwKICAgIG9uTW91c2VVcChldmVudCkgewogICAgICBpZiAoIXRoaXMuaGFzTGlzdGVuZXJbJ29uLW1vdXNldXAnXSkgcmV0dXJuOwoKICAgICAgY29uc3QgaW50ZXJzZWN0ZWQgPSB0aGlzLnBpY2soZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgIHRoaXMuJGVtaXQoJ29uLW1vdXNldXAnLCBpbnRlcnNlY3RlZCk7CiAgICB9LAogICAgb25Nb3VzZVdoZWVsKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tbW91c2V3aGVlbCddKSByZXR1cm47CgogICAgICBjb25zdCBpbnRlcnNlY3RlZCA9IHRoaXMucGljayhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgICAgdGhpcy4kZW1pdCgnb24tbW91c2V3aGVlbCcsIGludGVyc2VjdGVkKTsKICAgIH0sCiAgICBvbkNsaWNrKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tY2xpY2snXSkgcmV0dXJuOwoKICAgICAgY29uc3QgaW50ZXJzZWN0ZWQgPSB0aGlzLnBpY2soZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgIHRoaXMuJGVtaXQoJ29uLWNsaWNrJywgaW50ZXJzZWN0ZWQpOwogICAgfSwKICAgIHBpY2soeCwgeSkgewogICAgICBpZiAoIXRoaXMub2JqZWN0KSByZXR1cm4gbnVsbDsKCiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgICAgIHggLT0gcmVjdC5sZWZ0OwogICAgICB5IC09IHJlY3QudG9wOwoKICAgICAgdGhpcy5tb3VzZS54ID0gKHggLyB0aGlzLnNpemUud2lkdGgpICogMiAtIDE7CiAgICAgIHRoaXMubW91c2UueSA9IC0oeSAvIHRoaXMuc2l6ZS5oZWlnaHQpICogMiArIDE7CgogICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTsKCiAgICAgIGNvbnN0IGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3QodGhpcy5vYmplY3QsIHRydWUpOwoKICAgICAgcmV0dXJuIChpbnRlcnNlY3RzICYmIGludGVyc2VjdHMubGVuZ3RoKSA+IDAgPyBpbnRlcnNlY3RzWzBdIDogbnVsbDsKICAgIH0sCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMudXBkYXRlUmVuZGVyZXIoKTsKICAgICAgdGhpcy51cGRhdGVDYW1lcmEoKTsKICAgICAgdGhpcy51cGRhdGVMaWdodHMoKTsKICAgICAgdGhpcy51cGRhdGVDb250cm9scygpOwogICAgfSwKICAgIHVwZGF0ZU1vZGVsKCkgewogICAgICBjb25zdCB7IG9iamVjdCB9ID0gdGhpczsKCiAgICAgIGlmICghb2JqZWN0KSByZXR1cm47CgogICAgICBjb25zdCB7IHBvc2l0aW9uIH0gPSB0aGlzOwogICAgICBjb25zdCB7IHJvdGF0aW9uIH0gPSB0aGlzOwogICAgICBjb25zdCB7IHNjYWxlIH0gPSB0aGlzOwoKICAgICAgb2JqZWN0LnBvc2l0aW9uLnNldChwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KTsKICAgICAgb2JqZWN0LnJvdGF0aW9uLnNldChyb3RhdGlvbi54LCByb3RhdGlvbi55LCByb3RhdGlvbi56KTsKICAgICAgb2JqZWN0LnNjYWxlLnNldChzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTsKICAgIH0sCiAgICB1cGRhdGVSZW5kZXJlcigpIHsKICAgICAgY29uc3QgeyByZW5kZXJlciB9ID0gdGhpczsKCiAgICAgIHJlbmRlcmVyLnNldFNpemUodGhpcy5zaXplLndpZHRoLCB0aGlzLnNpemUuaGVpZ2h0KTsKICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKTsKICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcihuZXcgQ29sb3IodGhpcy5iYWNrZ3JvdW5kQ29sb3IpLmdldEhleCgpKTsKICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJBbHBoYSh0aGlzLmJhY2tncm91bmRBbHBoYSk7CiAgICB9LAogICAgdXBkYXRlQ2FtZXJhKCkgewogICAgICBjb25zdCB7IGNhbWVyYSB9ID0gdGhpczsKICAgICAgY29uc3QgeyBvYmplY3QgfSA9IHRoaXM7CgogICAgICBjYW1lcmEuYXNwZWN0ID0gdGhpcy5zaXplLndpZHRoIC8gdGhpcy5zaXplLmhlaWdodDsKICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKCiAgICAgIGlmICghdGhpcy5jYW1lcmFMb29rQXQgJiYgIXRoaXMuY2FtZXJhVXApIHsKICAgICAgICBpZiAoIW9iamVjdCkgcmV0dXJuOwoKICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGdldFNpemUob2JqZWN0KS5sZW5ndGgoKTsKCiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCh0aGlzLmNhbWVyYVBvc2l0aW9uLngsIHRoaXMuY2FtZXJhUG9zaXRpb24ueSwgdGhpcy5jYW1lcmFQb3NpdGlvbi56KTsKICAgICAgICBjYW1lcmEucm90YXRpb24uc2V0KHRoaXMuY2FtZXJhUm90YXRpb24ueCwgdGhpcy5jYW1lcmFSb3RhdGlvbi55LCB0aGlzLmNhbWVyYVJvdGF0aW9uLnopOwoKICAgICAgICBpZiAodGhpcy5jYW1lcmFQb3NpdGlvbi54ID09PSAwICYmIHRoaXMuY2FtZXJhUG9zaXRpb24ueSA9PT0gMCAmJiB0aGlzLmNhbWVyYVBvc2l0aW9uLnogPT09IDApIHsKICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi56ID0gZGlzdGFuY2U7CiAgICAgICAgfQoKICAgICAgICBjYW1lcmEubG9va0F0KG5ldyBWZWN0b3IzKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQodGhpcy5jYW1lcmFQb3NpdGlvbi54LCB0aGlzLmNhbWVyYVBvc2l0aW9uLnksIHRoaXMuY2FtZXJhUG9zaXRpb24ueik7CiAgICAgICAgY2FtZXJhLnJvdGF0aW9uLnNldCh0aGlzLmNhbWVyYVJvdGF0aW9uLngsIHRoaXMuY2FtZXJhUm90YXRpb24ueSwgdGhpcy5jYW1lcmFSb3RhdGlvbi56KTsKICAgICAgICBjYW1lcmEudXAuc2V0KHRoaXMuY2FtZXJhVXAueCwgdGhpcy5jYW1lcmFVcC55LCB0aGlzLmNhbWVyYVVwLnopOwoKICAgICAgICBjYW1lcmEubG9va0F0KG5ldyBWZWN0b3IzKHRoaXMuY2FtZXJhTG9va0F0LngsIHRoaXMuY2FtZXJhTG9va0F0LnksIHRoaXMuY2FtZXJhTG9va0F0LnopKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUxpZ2h0cygpIHsKICAgICAgdGhpcy5zY2VuZS5yZW1vdmUoLi4udGhpcy5hbGxMaWdodHMpOwoKICAgICAgdGhpcy5hbGxMaWdodHMgPSBbXTsKCiAgICAgIHRoaXMubGlnaHRzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoIWl0ZW0udHlwZSkgcmV0dXJuOwoKICAgICAgICBjb25zdCB0eXBlID0gaXRlbS50eXBlLnRvTG93ZXJDYXNlKCk7CgogICAgICAgIGxldCBsaWdodCA9IG51bGw7CgogICAgICAgIGlmICh0eXBlID09PSAnYW1iaWVudCcgfHwgdHlwZSA9PT0gJ2FtYmllbnRsaWdodCcpIHsKICAgICAgICAgIGNvbnN0IGNvbG9yID0gaXRlbS5jb2xvciA9PT0gMHgwMDAwMDAgPyBpdGVtLmNvbG9yIDogaXRlbS5jb2xvciB8fCAweDQwNDA0MDsKICAgICAgICAgIGNvbnN0IGludGVuc2l0eSA9IGl0ZW0uaW50ZW5zaXR5ID09PSAwID8gaXRlbS5pbnRlbnNpdHkgOiBpdGVtLmludGVuc2l0eSB8fCAxOwoKICAgICAgICAgIGxpZ2h0ID0gbmV3IEFtYmllbnRMaWdodChjb2xvciwgaW50ZW5zaXR5KTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb2ludCcgfHwgdHlwZSA9PT0gJ3BvaW50bGlnaHQnKSB7CiAgICAgICAgICBjb25zdCBjb2xvciA9IGl0ZW0uY29sb3IgPT09IDB4MDAwMDAwID8gaXRlbS5jb2xvciA6IGl0ZW0uY29sb3IgfHwgMHhmZmZmZmY7CiAgICAgICAgICBjb25zdCBpbnRlbnNpdHkgPSBpdGVtLmludGVuc2l0eSA9PT0gMCA/IGl0ZW0uaW50ZW5zaXR5IDogaXRlbS5pbnRlbnNpdHkgfHwgMTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gaXRlbS5kaXN0YW5jZSB8fCAwOwogICAgICAgICAgY29uc3QgZGVjYXkgPSBpdGVtLmRlY2F5ID09PSAwID8gaXRlbS5kZWNheSA6IGl0ZW0uZGVjYXkgfHwgMTsKCiAgICAgICAgICBsaWdodCA9IG5ldyBQb2ludExpZ2h0KGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBkZWNheSk7CgogICAgICAgICAgaWYgKGl0ZW0ucG9zaXRpb24pIHsKICAgICAgICAgICAgbGlnaHQucG9zaXRpb24uY29weShpdGVtLnBvc2l0aW9uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkaXJlY3Rpb25hbCcgfHwgdHlwZSA9PT0gJ2RpcmVjdGlvbmFsbGlnaHQnKSB7CiAgICAgICAgICBjb25zdCBjb2xvciA9IGl0ZW0uY29sb3IgPT09IDB4MDAwMDAwID8gaXRlbS5jb2xvciA6IGl0ZW0uY29sb3IgfHwgMHhmZmZmZmY7CiAgICAgICAgICBjb25zdCBpbnRlbnNpdHkgPSBpdGVtLmludGVuc2l0eSA9PT0gMCA/IGl0ZW0uaW50ZW5zaXR5IDogaXRlbS5pbnRlbnNpdHkgfHwgMTsKCiAgICAgICAgICBsaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KGNvbG9yLCBpbnRlbnNpdHkpOwoKICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKSB7CiAgICAgICAgICAgIGxpZ2h0LnBvc2l0aW9uLmNvcHkoaXRlbS5wb3NpdGlvbik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGl0ZW0udGFyZ2V0KSB7CiAgICAgICAgICAgIGxpZ2h0LnRhcmdldC5jb3B5KGl0ZW0udGFyZ2V0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdoZW1pc3BoZXJlJyB8fCB0eXBlID09PSAnaGVtaXNwaGVyZWxpZ2h0JykgewogICAgICAgICAgY29uc3Qgc2t5Q29sb3IgPSBpdGVtLnNreUNvbG9yID09PSAweDAwMDAwMCA/IGl0ZW0uc2t5Q29sb3IgOiBpdGVtLnNreUNvbG9yIHx8IDB4ZmZmZmZmOwogICAgICAgICAgY29uc3QgZ3JvdW5kQ29sb3IgPSBpdGVtLmdyb3VuZENvbG9yID09PSAweDAwMDAwMCA/IGl0ZW0uZ3JvdW5kQ29sb3IgOiBpdGVtLmdyb3VuZENvbG9yIHx8IDB4ZmZmZmZmOwogICAgICAgICAgY29uc3QgaW50ZW5zaXR5ID0gaXRlbS5pbnRlbnNpdHkgPT09IDAgPyBpdGVtLmludGVuc2l0eSA6IGl0ZW0uaW50ZW5zaXR5IHx8IDE7CgogICAgICAgICAgbGlnaHQgPSBuZXcgSGVtaXNwaGVyZUxpZ2h0KHNreUNvbG9yLCBncm91bmRDb2xvciwgaW50ZW5zaXR5KTsKCiAgICAgICAgICBpZiAoaXRlbS5wb3NpdGlvbikgewogICAgICAgICAgICBsaWdodC5wb3NpdGlvbi5jb3B5KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5hbGxMaWdodHMucHVzaChsaWdodCk7CiAgICAgICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVDb250cm9scygpIHsKICAgICAgaWYgKHRoaXMuY29udHJvbHNPcHRpb25zKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRyb2xzLCB0aGlzLmNvbnRyb2xzT3B0aW9ucyk7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkKCkgewogICAgICBpZiAoIXRoaXMuc3JjKSByZXR1cm47CgogICAgICBpZiAodGhpcy5vYmplY3QpIHsKICAgICAgICB0aGlzLndyYXBwZXIucmVtb3ZlKHRoaXMub2JqZWN0KTsKICAgICAgfQoKICAgICAgdGhpcy5sb2FkZXIuc2V0UmVxdWVzdEhlYWRlcih0aGlzLnJlcXVlc3RIZWFkZXIpOwogICAgICB0aGlzLmxvYWRlci5sb2FkKHRoaXMuc3JjLCAoLi4uYXJncykgPT4gewogICAgICAgIGNvbnN0IG9iamVjdCA9IHRoaXMuZ2V0T2JqZWN0KC4uLmFyZ3MpOwoKICAgICAgICBpZiAodGhpcy5wcm9jZXNzKSB7CiAgICAgICAgICB0aGlzLnByb2Nlc3Mob2JqZWN0KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYWRkT2JqZWN0KG9iamVjdCk7CgogICAgICAgIHRoaXMuJGVtaXQoJ29uLWxvYWQnKTsKICAgICAgfSwgKHhocikgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ29uLXByb2dyZXNzJywgeGhyKTsKICAgICAgfSwgKGVycikgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ29uLWVycm9yJywgZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0T2JqZWN0KG9iamVjdCkgewogICAgICByZXR1cm4gb2JqZWN0OwogICAgfSwKICAgIGFkZE9iamVjdChvYmplY3QpIHsKICAgICAgY29uc3QgY2VudGVyID0gZ2V0Q2VudGVyKG9iamVjdCk7CgogICAgICAvLyBjb3JyZWN0aW9uIHBvc2l0aW9uCiAgICAgIHRoaXMud3JhcHBlci5wb3NpdGlvbi5jb3B5KGNlbnRlci5uZWdhdGUoKSk7CgogICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDsKICAgICAgdGhpcy53cmFwcGVyLmFkZChvYmplY3QpOwoKICAgICAgdGhpcy51cGRhdGVDYW1lcmEoKTsKICAgICAgdGhpcy51cGRhdGVNb2RlbCgpOwogICAgfSwKICAgIGFuaW1hdGUoKSB7CiAgICAgIHRoaXMucmVxSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlKTsKICAgICAgdGhpcy5yZW5kZXIoKTsKICAgIH0sCiAgICByZW5kZXIoKSB7CiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTsKICAgIH0sCiAgfSwKfTsKCg=="},{"version":3,"sources":["model-mixin.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"model-mixin.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n    <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\n    <div v-else>\n      <slot>\n        Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport {\n  Object3D,\n  Vector2,\n  Vector3,\n  Color,\n  Scene,\n  Raycaster,\n  WebGLRenderer,\n  PerspectiveCamera,\n  AmbientLight,\n  PointLight,\n  HemisphereLight,\n  DirectionalLight,\n  LinearEncoding,\n} from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { getSize, getCenter } from './util';\n\nconst suportWebGL = (() => {\n  try {\n    const canvas = document.createElement('canvas');\n    return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n  } catch (e) {\n    return false;\n  }\n})();\n\nconst DEFAULT_GL_OPTIONS = {\n  antialias: true,\n  alpha: true,\n};\n\nexport default {\n  props: {\n    src: {\n      type: String,\n    },\n    width: {\n      type: Number,\n    },\n    height: {\n      type: Number,\n    },\n    position: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    rotation: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    scale: {\n      type: Object,\n      default() {\n        return { x: 1, y: 1, z: 1 };\n      },\n    },\n    lights: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    cameraPosition: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    cameraRotation: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    cameraUp: {\n      type: Object,\n    },\n    cameraLookAt: {\n      type: Object,\n    },\n    backgroundColor: {\n      default: 0xffffff,\n    },\n    backgroundAlpha: {\n      type: Number,\n      default: 1,\n    },\n    controlsOptions: {\n      type: Object,\n    },\n    crossOrigin: {\n      default: 'anonymous',\n    },\n    requestHeader: {\n      default: () => {},\n    },\n    outputEncoding: {\n      type: Number,\n      default: LinearEncoding,\n    },\n    glOptions: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      suportWebGL,\n      size: {\n        width: this.width,\n        height: this.height,\n      },\n      object: null,\n      raycaster: new Raycaster(),\n      mouse: new Vector2(),\n      camera: new PerspectiveCamera(45, 1, 0.01, 100000),\n      scene: new Scene(),\n      wrapper: new Object3D(),\n      renderer: null,\n      controls: null,\n      allLights: [],\n      clock: typeof performance === 'undefined' ? Date : performance,\n      reqId: null, // requestAnimationFrame id\n    };\n  },\n  computed: {\n    hasListener() {\n      /* eslint-disable no-underscore-dangle */\n      const events = this._events;\n      const result = {};\n\n      ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-mousewheel', 'on-click'].forEach((name) => {\n        result[name] = !!events[name] && events[name].length > 0;\n      });\n\n      return result;\n    },\n  },\n  mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight,\n      };\n    }\n\n    const options = Object.assign({}, DEFAULT_GL_OPTIONS, this.glOptions, {\n      canvas: this.$refs.canvas,\n    });\n\n    this.renderer = new WebGLRenderer(options);\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.outputEncoding = this.outputEncoding;\n\n    this.controls = new OrbitControls(this.camera, this.$el);\n    this.controls.type = 'orbit';\n\n    this.scene.add(this.wrapper);\n\n    this.load();\n    this.update();\n\n    this.$el.addEventListener('mousedown', this.onMouseDown, false);\n    this.$el.addEventListener('mousemove', this.onMouseMove, false);\n    this.$el.addEventListener('mouseup', this.onMouseUp, false);\n    this.$el.addEventListener('mousewheel', this.onMouseWheel, false);\n    this.$el.addEventListener('click', this.onClick, false);\n\n    window.addEventListener('resize', this.onResize, false);\n\n    this.animate();\n  },\n  beforeDestroy() {\n    cancelAnimationFrame(this.reqId);\n\n    this.renderer.dispose();\n\n    if (this.controls) {\n      this.controls.dispose();\n    }\n\n    this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n    this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n    this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n    this.$el.removeEventListener('mousewheel', this.onMouseWheel, false);\n    this.$el.removeEventListener('click', this.onClick, false);\n\n    window.removeEventListener('resize', this.onResize, false);\n  },\n  watch: {\n    src() {\n      this.load();\n    },\n    cameraRotation: {\n      deep: true,\n      handler(val) {\n        if (!this.camera) return;\n        this.camera.rotation.set(val.x, val.y, val.z);\n      },\n    },\n    cameraPosition: {\n      deep: true,\n      handler(val) {\n        if (!this.camera) return;\n        this.camera.position.set(val.x, val.y, val.z);\n      },\n    },\n    rotation: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.rotation.set(val.x, val.y, val.z);\n      },\n    },\n    position: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.position.set(val.x, val.y, val.z);\n      },\n    },\n    scale: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.scale.set(val.x, val.y, val.z);\n      },\n    },\n    lights: {\n      deep: true,\n      handler() {\n        this.updateLights();\n      },\n    },\n    size: {\n      deep: true,\n      handler() {\n        this.updateCamera();\n        this.updateRenderer();\n      },\n    },\n    controlsOptions: {\n      deep: true,\n      handler() {\n        this.updateControls();\n      },\n    },\n    backgroundAlpha() {\n      this.updateRenderer();\n    },\n    backgroundColor() {\n      this.updateRenderer();\n    },\n  },\n  methods: {\n    onResize() {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight,\n          };\n        });\n      }\n    },\n    onMouseDown(event) {\n      if (!this.hasListener['on-mousedown']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousedown', intersected);\n    },\n    onMouseMove(event) {\n      if (!this.hasListener['on-mousemove']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousemove', { camera: this.camera, intersected });\n    },\n    onMouseUp(event) {\n      if (!this.hasListener['on-mouseup']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mouseup', intersected);\n    },\n    onMouseWheel(event) {\n      if (!this.hasListener['on-mousewheel']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousewheel', intersected);\n    },\n    onClick(event) {\n      if (!this.hasListener['on-click']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-click', intersected);\n    },\n    pick(x, y) {\n      if (!this.object) return null;\n\n      const rect = this.$el.getBoundingClientRect();\n\n      x -= rect.left;\n      y -= rect.top;\n\n      this.mouse.x = (x / this.size.width) * 2 - 1;\n      this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n\n      const intersects = this.raycaster.intersectObject(this.object, true);\n\n      return (intersects && intersects.length) > 0 ? intersects[0] : null;\n    },\n    update() {\n      this.updateRenderer();\n      this.updateCamera();\n      this.updateLights();\n      this.updateControls();\n    },\n    updateModel() {\n      const { object } = this;\n\n      if (!object) return;\n\n      const { position } = this;\n      const { rotation } = this;\n      const { scale } = this;\n\n      object.position.set(position.x, position.y, position.z);\n      object.rotation.set(rotation.x, rotation.y, rotation.z);\n      object.scale.set(scale.x, scale.y, scale.z);\n    },\n    updateRenderer() {\n      const { renderer } = this;\n\n      renderer.setSize(this.size.width, this.size.height);\n      renderer.setPixelRatio(window.devicePixelRatio || 1);\n      renderer.setClearColor(new Color(this.backgroundColor).getHex());\n      renderer.setClearAlpha(this.backgroundAlpha);\n    },\n    updateCamera() {\n      const { camera } = this;\n      const { object } = this;\n\n      camera.aspect = this.size.width / this.size.height;\n      camera.updateProjectionMatrix();\n\n      if (!this.cameraLookAt && !this.cameraUp) {\n        if (!object) return;\n\n        const distance = getSize(object).length();\n\n        camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n        camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n\n        if (this.cameraPosition.x === 0 && this.cameraPosition.y === 0 && this.cameraPosition.z === 0) {\n          camera.position.z = distance;\n        }\n\n        camera.lookAt(new Vector3());\n      } else {\n        camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n        camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n        camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\n\n        camera.lookAt(new Vector3(this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\n      }\n    },\n    updateLights() {\n      this.scene.remove(...this.allLights);\n\n      this.allLights = [];\n\n      this.lights.forEach((item) => {\n        if (!item.type) return;\n\n        const type = item.type.toLowerCase();\n\n        let light = null;\n\n        if (type === 'ambient' || type === 'ambientlight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0x404040;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new AmbientLight(color, intensity);\n        } else if (type === 'point' || type === 'pointlight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n          const distance = item.distance || 0;\n          const decay = item.decay === 0 ? item.decay : item.decay || 1;\n\n          light = new PointLight(color, intensity, distance, decay);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n        } else if (type === 'directional' || type === 'directionallight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new DirectionalLight(color, intensity);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n\n          if (item.target) {\n            light.target.copy(item.target);\n          }\n        } else if (type === 'hemisphere' || type === 'hemispherelight') {\n          const skyColor = item.skyColor === 0x000000 ? item.skyColor : item.skyColor || 0xffffff;\n          const groundColor = item.groundColor === 0x000000 ? item.groundColor : item.groundColor || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new HemisphereLight(skyColor, groundColor, intensity);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n        }\n\n        this.allLights.push(light);\n        this.scene.add(light);\n      });\n    },\n    updateControls() {\n      if (this.controlsOptions) {\n        Object.assign(this.controls, this.controlsOptions);\n      }\n    },\n    load() {\n      if (!this.src) return;\n\n      if (this.object) {\n        this.wrapper.remove(this.object);\n      }\n\n      this.loader.setRequestHeader(this.requestHeader);\n      this.loader.load(this.src, (...args) => {\n        const object = this.getObject(...args);\n\n        if (this.process) {\n          this.process(object);\n        }\n\n        this.addObject(object);\n\n        this.$emit('on-load');\n      }, (xhr) => {\n        this.$emit('on-progress', xhr);\n      }, (err) => {\n        this.$emit('on-error', err);\n      });\n    },\n    getObject(object) {\n      return object;\n    },\n    addObject(object) {\n      const center = getCenter(object);\n\n      // correction position\n      this.wrapper.position.copy(center.negate());\n\n      this.object = object;\n      this.wrapper.add(object);\n\n      this.updateCamera();\n      this.updateModel();\n    },\n    animate() {\n      this.reqId = requestAnimationFrame(this.animate);\n      this.render();\n    },\n    render() {\n      this.renderer.render(this.scene, this.camera);\n    },\n  },\n};\n\n</script>\n"]}]}