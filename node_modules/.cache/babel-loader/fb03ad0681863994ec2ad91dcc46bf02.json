{"remainingRequest":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/thread-loader/dist/cjs.js!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/eslint-loader/index.js??ref--14-0!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/util.js","dependencies":[{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/util.js","mtime":1638514315000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/babel.config.js","mtime":1638514315000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmxvYXQzMi1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQzMi1hcnJheS5qcyI7CmltcG9ydCB7IEJveDMsIFZlY3RvcjMsIFZlY3RvcjIsIEJ1ZmZlckF0dHJpYnV0ZSB9IGZyb20gJ3RocmVlJzsKLyogZXNsaW50LWRpc2FibGUgKi8KCnZhciBib3ggPSBuZXcgQm94MygpOwoKZnVuY3Rpb24gZ2V0U2l6ZShvYmplY3QpIHsKICBib3guc2V0RnJvbU9iamVjdChvYmplY3QpOwogIHJldHVybiBib3guZ2V0U2l6ZShuZXcgVmVjdG9yMygpKTsKfQoKZnVuY3Rpb24gZ2V0Q2VudGVyKG9iamVjdCkgewogIGJveC5zZXRGcm9tT2JqZWN0KG9iamVjdCk7CiAgcmV0dXJuIGJveC5nZXRDZW50ZXIobmV3IFZlY3RvcjMoKSk7Cn0gLy8gZnVuY3Rpb24gbGlnaHRzRGlmZihsaWdodHMsIG9sZExpZ2h0cykgewovLyB9CgoKZnVuY3Rpb24gdG9JbmRleGVkKGJ1ZmZlckdlb21ldHJ5KSB7CiAgdmFyIHJhd1Bvc2l0aW9ucyA9IGJ1ZmZlckdlb21ldHJ5LmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKS5hcnJheTsKICB2YXIgcmF3VXZzOwogIHZhciBoYXNVViA9IGJ1ZmZlckdlb21ldHJ5LmdldEF0dHJpYnV0ZSgndXYnKSAhPT0gdW5kZWZpbmVkOwogIGlmIChoYXNVVikgcmF3VXZzID0gYnVmZmVyR2VvbWV0cnkuZ2V0QXR0cmlidXRlKCd1dicpLmFycmF5OwogIHZhciByYXdOb3JtYWxzOwogIHZhciBoYXNOb3JtYWwgPSBidWZmZXJHZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ25vcm1hbCcpICE9PSB1bmRlZmluZWQ7CiAgaWYgKGhhc05vcm1hbCkgcmF3Tm9ybWFscyA9IGJ1ZmZlckdlb21ldHJ5LmdldEF0dHJpYnV0ZSgnbm9ybWFsJykuYXJyYXk7CiAgdmFyIGluZGljZXMgPSBbXTsKICB2YXIgdmVydGljZXMgPSBbXTsKICB2YXIgbm9ybWFscyA9IFtdOwogIHZhciB1dnMgPSBbXTsKICB2YXIgZmFjZTsKICB2YXIgZmFjZU5vcm1hbHNzOwogIHZhciBmYWNlVXZzOwogIHZhciB0bXBJbmRpY2VzOwogIHZhciB2MCA9IG5ldyBWZWN0b3IzKCk7CiAgdmFyIHYxID0gbmV3IFZlY3RvcjMoKTsKICB2YXIgdjIgPSBuZXcgVmVjdG9yMygpOwogIHZhciBuMCA9IG5ldyBWZWN0b3IzKCk7CiAgdmFyIG4xID0gbmV3IFZlY3RvcjMoKTsKICB2YXIgbjIgPSBuZXcgVmVjdG9yMygpOwogIHZhciB1djAgPSBuZXcgVmVjdG9yMigpOwogIHZhciB1djEgPSBuZXcgVmVjdG9yMigpOwogIHZhciB1djIgPSBuZXcgVmVjdG9yMigpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd1Bvc2l0aW9ucy5sZW5ndGg7IGkgKz0gOSkgewogICAgdjAueCA9IHJhd1Bvc2l0aW9uc1tpXTsKICAgIHYwLnkgPSByYXdQb3NpdGlvbnNbaSArIDFdOwogICAgdjAueiA9IHJhd1Bvc2l0aW9uc1tpICsgMl07CiAgICB2MS54ID0gcmF3UG9zaXRpb25zW2kgKyAzXTsKICAgIHYxLnkgPSByYXdQb3NpdGlvbnNbaSArIDRdOwogICAgdjEueiA9IHJhd1Bvc2l0aW9uc1tpICsgNV07CiAgICB2Mi54ID0gcmF3UG9zaXRpb25zW2kgKyA2XTsKICAgIHYyLnkgPSByYXdQb3NpdGlvbnNbaSArIDddOwogICAgdjIueiA9IHJhd1Bvc2l0aW9uc1tpICsgOF07CiAgICBmYWNlID0gW3YwLCB2MSwgdjJdOwoKICAgIGlmIChoYXNOb3JtYWwpIHsKICAgICAgbjAueCA9IHJhd05vcm1hbHNbaV07CiAgICAgIG4wLnkgPSByYXdOb3JtYWxzW2kgKyAxXTsKICAgICAgbjAueiA9IHJhd05vcm1hbHNbaSArIDJdOwogICAgICBuMS54ID0gcmF3Tm9ybWFsc1tpICsgM107CiAgICAgIG4xLnkgPSByYXdOb3JtYWxzW2kgKyA0XTsKICAgICAgbjEueiA9IHJhd05vcm1hbHNbaSArIDVdOwogICAgICBuMi54ID0gcmF3Tm9ybWFsc1tpICsgNl07CiAgICAgIG4yLnkgPSByYXdOb3JtYWxzW2kgKyA3XTsKICAgICAgbjIueiA9IHJhd05vcm1hbHNbaSArIDhdOwogICAgICBmYWNlTm9ybWFsc3MgPSBbbjAsIG4xLCBuMl07CiAgICB9CgogICAgaWYgKGhhc1VWKSB7CiAgICAgIHV2MC54ID0gcmF3VXZzW2ldOwogICAgICB1djAueSA9IHJhd1V2c1tpICsgMV07CiAgICAgIHV2MS54ID0gcmF3VXZzW2kgKyAyXTsKICAgICAgdXYxLnkgPSByYXdVdnNbaSArIDNdOwogICAgICB1djIueCA9IHJhd1V2c1tpICsgNF07CiAgICAgIHV2Mi55ID0gcmF3VXZzW2kgKyA1XTsKICAgICAgZmFjZVV2cyA9IFt1djAsIHV2MSwgdXYyXTsKICAgIH0KCiAgICB0bXBJbmRpY2VzID0gW107CiAgICBmYWNlLmZvckVhY2goZnVuY3Rpb24gKHYsIGkpIHsKICAgICAgdmFyIGlkID0gZXhpc3RzKHYsIHZlcnRpY2VzKTsKCiAgICAgIGlmIChpZCA9PT0gLTEpIHsKICAgICAgICBpZCA9IHZlcnRpY2VzLmxlbmd0aDsKICAgICAgICB2ZXJ0aWNlcy5wdXNoKHYuY2xvbmUoKSk7CiAgICAgICAgaWYgKGhhc05vcm1hbCkgbm9ybWFscy5wdXNoKGZhY2VOb3JtYWxzc1tpXS5jbG9uZSgpKTsKICAgICAgICBpZiAoaGFzVVYpIHV2cy5wdXNoKGZhY2VVdnNbaV0uY2xvbmUoKSk7CiAgICAgIH0KCiAgICAgIHRtcEluZGljZXMucHVzaChpZCk7CiAgICB9KTsKICAgIGluZGljZXMucHVzaCh0bXBJbmRpY2VzWzBdLCB0bXBJbmRpY2VzWzFdLCB0bXBJbmRpY2VzWzJdKTsKICB9CgogIHZhciBwb3NpdGlvbkJ1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMubGVuZ3RoICogMyk7CiAgdmFyIG5vcm1hbEJ1ZmZlcjsKICB2YXIgdXZCdWZmZXI7CiAgaWYgKGhhc05vcm1hbCkgbm9ybWFsQnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcy5sZW5ndGggKiAzKTsKICBpZiAoaGFzVVYpIHV2QnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcy5sZW5ndGggKiAyKTsKICB2YXIgaTIgPSAwOwogIHZhciBpMyA9IDA7CgogIGZvciAodmFyIF9pID0gMDsgX2kgPCB2ZXJ0aWNlcy5sZW5ndGg7IF9pKyspIHsKICAgIGkzID0gX2kgKiAzOwogICAgcG9zaXRpb25CdWZmZXJbaTNdID0gdmVydGljZXNbX2ldLng7CiAgICBwb3NpdGlvbkJ1ZmZlcltpMyArIDFdID0gdmVydGljZXNbX2ldLnk7CiAgICBwb3NpdGlvbkJ1ZmZlcltpMyArIDJdID0gdmVydGljZXNbX2ldLno7CgogICAgaWYgKGhhc05vcm1hbCkgewogICAgICBub3JtYWxCdWZmZXJbaTNdID0gbm9ybWFsc1tfaV0ueDsKICAgICAgbm9ybWFsQnVmZmVyW2kzICsgMV0gPSBub3JtYWxzW19pXS55OwogICAgICBub3JtYWxCdWZmZXJbaTMgKyAyXSA9IG5vcm1hbHNbX2ldLno7CiAgICB9CgogICAgaWYgKGhhc1VWKSB7CiAgICAgIGkyID0gX2kgKiAyOwogICAgICB1dkJ1ZmZlcltpMl0gPSB1dnNbX2ldLng7CiAgICAgIHV2QnVmZmVyW2kyICsgMV0gPSB1dnNbX2ldLnk7CiAgICB9CiAgfQoKICBidWZmZXJHZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbkJ1ZmZlciwgMykpOwogIGlmIChoYXNOb3JtYWwpIGJ1ZmZlckdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgnbm9ybWFsJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZShub3JtYWxCdWZmZXIsIDMpKTsKICBpZiAoaGFzVVYpIGJ1ZmZlckdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgndXYnLCBuZXcgQnVmZmVyQXR0cmlidXRlKHV2QnVmZmVyLCAyKSk7CiAgYnVmZmVyR2VvbWV0cnkuc2V0SW5kZXgobmV3IEJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDMyQXJyYXkoaW5kaWNlcyksIDEpKTsKICByZXR1cm4gYnVmZmVyR2VvbWV0cnk7CgogIGZ1bmN0aW9uIGV4aXN0cyh2LCB2ZXJ0aWNlcykgewogICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgdmVydGljZXMubGVuZ3RoOyBfaTIrKykgewogICAgICBpZiAodi5lcXVhbHModmVydGljZXNbX2kyXSkpIHJldHVybiBfaTI7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH0KfQoKZXhwb3J0IHsgZ2V0U2l6ZSwgZ2V0Q2VudGVyLCB0b0luZGV4ZWQgfTs="},{"version":3,"sources":["/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/util.js"],"names":["Box3","Vector3","Vector2","BufferAttribute","box","getSize","object","setFromObject","getCenter","toIndexed","bufferGeometry","rawPositions","getAttribute","array","rawUvs","hasUV","undefined","rawNormals","hasNormal","indices","vertices","normals","uvs","face","faceNormalss","faceUvs","tmpIndices","v0","v1","v2","n0","n1","n2","uv0","uv1","uv2","i","length","x","y","z","forEach","v","id","exists","push","clone","positionBuffer","Float32Array","normalBuffer","uvBuffer","i2","i3","addAttribute","setIndex","Uint32Array","equals"],"mappings":"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","sourcesContent":["import {\n  Box3, Vector3, Vector2, BufferAttribute,\n} from 'three';\n\n/* eslint-disable */\n\nconst box = new Box3();\n\nfunction getSize(object) {\n  box.setFromObject(object);\n\n  return box.getSize(new Vector3());\n}\n\nfunction getCenter(object) {\n  box.setFromObject(object);\n\n  return box.getCenter(new Vector3());\n}\n\n// function lightsDiff(lights, oldLights) {\n// }\n\nfunction toIndexed(bufferGeometry) {\n  const rawPositions = bufferGeometry.getAttribute('position').array;\n\n  let rawUvs;\n  const hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n  if (hasUV) rawUvs = bufferGeometry.getAttribute('uv').array;\n\n  let rawNormals;\n  const hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n  if (hasNormal) rawNormals = bufferGeometry.getAttribute('normal').array;\n\n  const indices = [];\n  const vertices = [];\n  const normals = [];\n  const uvs = [];\n\n  let face; let faceNormalss; let faceUvs; let\n    tmpIndices;\n\n  const v0 = new Vector3();\n  const v1 = new Vector3();\n  const v2 = new Vector3();\n\n  const n0 = new Vector3();\n  const n1 = new Vector3();\n  const n2 = new Vector3();\n\n  const uv0 = new Vector2();\n  const uv1 = new Vector2();\n  const uv2 = new Vector2();\n\n  for (let i = 0; i < rawPositions.length; i += 9) {\n    v0.x = rawPositions[i];\n    v0.y = rawPositions[i + 1];\n    v0.z = rawPositions[i + 2];\n\n    v1.x = rawPositions[i + 3];\n    v1.y = rawPositions[i + 4];\n    v1.z = rawPositions[i + 5];\n\n    v2.x = rawPositions[i + 6];\n    v2.y = rawPositions[i + 7];\n    v2.z = rawPositions[i + 8];\n\n    face = [v0, v1, v2];\n\n    if (hasNormal) {\n      n0.x = rawNormals[i];\n      n0.y = rawNormals[i + 1];\n      n0.z = rawNormals[i + 2];\n\n      n1.x = rawNormals[i + 3];\n      n1.y = rawNormals[i + 4];\n      n1.z = rawNormals[i + 5];\n\n      n2.x = rawNormals[i + 6];\n      n2.y = rawNormals[i + 7];\n      n2.z = rawNormals[i + 8];\n\n      faceNormalss = [n0, n1, n2];\n    }\n\n    if (hasUV) {\n      uv0.x = rawUvs[i];\n      uv0.y = rawUvs[i + 1];\n\n      uv1.x = rawUvs[i + 2];\n      uv1.y = rawUvs[i + 3];\n\n      uv2.x = rawUvs[i + 4];\n      uv2.y = rawUvs[i + 5];\n\n      faceUvs = [uv0, uv1, uv2];\n    }\n\n    tmpIndices = [];\n\n    face.forEach((v, i) => {\n      let id = exists(v, vertices);\n      if (id === -1) {\n        id = vertices.length;\n        vertices.push(v.clone());\n\n        if (hasNormal) normals.push(faceNormalss[i].clone());\n        if (hasUV) uvs.push(faceUvs[i].clone());\n      }\n      tmpIndices.push(id);\n    });\n\n    indices.push(tmpIndices[0], tmpIndices[1], tmpIndices[2]);\n  }\n\n  const positionBuffer = new Float32Array(vertices.length * 3);\n\n  let normalBuffer; let\n    uvBuffer;\n\n  if (hasNormal) normalBuffer = new Float32Array(vertices.length * 3);\n  if (hasUV) uvBuffer = new Float32Array(vertices.length * 2);\n\n  let i2 = 0;\n  let i3 = 0;\n  for (let i = 0; i < vertices.length; i++) {\n    i3 = i * 3;\n\n    positionBuffer[i3] = vertices[i].x;\n    positionBuffer[i3 + 1] = vertices[i].y;\n    positionBuffer[i3 + 2] = vertices[i].z;\n\n    if (hasNormal) {\n      normalBuffer[i3] = normals[i].x;\n      normalBuffer[i3 + 1] = normals[i].y;\n      normalBuffer[i3 + 2] = normals[i].z;\n    }\n\n    if (hasUV) {\n      i2 = i * 2;\n      uvBuffer[i2] = uvs[i].x;\n      uvBuffer[i2 + 1] = uvs[i].y;\n    }\n  }\n\n  bufferGeometry.addAttribute('position', new BufferAttribute(positionBuffer, 3));\n  if (hasNormal) bufferGeometry.addAttribute('normal', new BufferAttribute(normalBuffer, 3));\n  if (hasUV) bufferGeometry.addAttribute('uv', new BufferAttribute(uvBuffer, 2));\n  bufferGeometry.setIndex(new BufferAttribute(new Uint32Array(indices), 1));\n  return bufferGeometry;\n\n  function exists(v, vertices) {\n    for (let i = 0; i < vertices.length; i++) {\n      if (v.equals(vertices[i])) return i;\n    }\n    return -1;\n  }\n}\n\nexport { getSize, getCenter, toIndexed };\n"]}]}