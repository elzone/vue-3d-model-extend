{"remainingRequest":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/model-mixin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/model-mixin.vue","mtime":1644767682045},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/babel.config.js","mtime":1638514315000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvYWxleC9Qcm9qZWN0cyBTb3VyY2VzL0VsdWNpZGx5L3Z1ZS0zZC1tb2RlbC1leHRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgT2JqZWN0M0QsIFZlY3RvcjIsIFZlY3RvcjMsIENvbG9yLCBTY2VuZSwgUmF5Y2FzdGVyLCBXZWJHTFJlbmRlcmVyLCBQZXJzcGVjdGl2ZUNhbWVyYSwgQW1iaWVudExpZ2h0LCBQb2ludExpZ2h0LCBIZW1pc3BoZXJlTGlnaHQsIERpcmVjdGlvbmFsTGlnaHQsIExpbmVhckVuY29kaW5nIH0gZnJvbSAndGhyZWUnOwppbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMnOwppbXBvcnQgeyBnZXRTaXplLCBnZXRDZW50ZXIgfSBmcm9tICcuL3V0aWwnOwoKdmFyIHN1cG9ydFdlYkdMID0gZnVuY3Rpb24gKCkgewogIHRyeSB7CiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICByZXR1cm4gISEod2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiAoY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpKSk7CiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfSgpOwoKdmFyIERFRkFVTFRfR0xfT1BUSU9OUyA9IHsKICBhbnRpYWxpYXM6IHRydWUsCiAgYWxwaGE6IHRydWUKfTsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBzcmM6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgd2lkdGg6IHsKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIHBvc2l0aW9uOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeDogMCwKICAgICAgICAgIHk6IDAsCiAgICAgICAgICB6OiAwCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHJvdGF0aW9uOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeDogMCwKICAgICAgICAgIHk6IDAsCiAgICAgICAgICB6OiAwCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHNjYWxlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeDogMSwKICAgICAgICAgIHk6IDEsCiAgICAgICAgICB6OiAxCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGxpZ2h0czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBjYW1lcmFQb3NpdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwLAogICAgICAgICAgejogMAogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBjYW1lcmFSb3RhdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwLAogICAgICAgICAgejogMAogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBjYW1lcmFVcDogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBjYW1lcmFMb29rQXQ6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgYmFja2dyb3VuZENvbG9yOiB7CiAgICAgICJkZWZhdWx0IjogMHhmZmZmZmYKICAgIH0sCiAgICBiYWNrZ3JvdW5kQWxwaGE6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICAiZGVmYXVsdCI6IDEKICAgIH0sCiAgICBjb250cm9sc09wdGlvbnM6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgY3Jvc3NPcmlnaW46IHsKICAgICAgImRlZmF1bHQiOiAnYW5vbnltb3VzJwogICAgfSwKICAgIHJlcXVlc3RIZWFkZXI6IHsKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9LAogICAgb3V0cHV0RW5jb2Rpbmc6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICAiZGVmYXVsdCI6IExpbmVhckVuY29kaW5nCiAgICB9LAogICAgZ2xPcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN1cG9ydFdlYkdMOiBzdXBvcnRXZWJHTCwKICAgICAgc2l6ZTogewogICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLAogICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQKICAgICAgfSwKICAgICAgb2JqZWN0OiBudWxsLAogICAgICByYXljYXN0ZXI6IG5ldyBSYXljYXN0ZXIoKSwKICAgICAgbW91c2U6IG5ldyBWZWN0b3IyKCksCiAgICAgIGNhbWVyYTogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCAxLCAwLjAxLCAxMDAwMDApLAogICAgICBzY2VuZTogbmV3IFNjZW5lKCksCiAgICAgIHdyYXBwZXI6IG5ldyBPYmplY3QzRCgpLAogICAgICByZW5kZXJlcjogbnVsbCwKICAgICAgY29udHJvbHM6IG51bGwsCiAgICAgIGFsbExpZ2h0czogW10sCiAgICAgIGNsb2NrOiB0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICd1bmRlZmluZWQnID8gRGF0ZSA6IHBlcmZvcm1hbmNlLAogICAgICByZXFJZDogbnVsbCAvLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgaWQKCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhhc0xpc3RlbmVyOiBmdW5jdGlvbiBoYXNMaXN0ZW5lcigpIHsKICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi8KICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50czsKICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICBbJ29uLW1vdXNlbW92ZScsICdvbi1tb3VzZXVwJywgJ29uLW1vdXNlZG93bicsICdvbi1tb3VzZXdoZWVsJywgJ29uLWNsaWNrJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHJlc3VsdFtuYW1lXSA9ICEhZXZlbnRzW25hbWVdICYmIGV2ZW50c1tuYW1lXS5sZW5ndGggPiAwOwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuaGVpZ2h0ID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5zaXplID0gewogICAgICAgIHdpZHRoOiB0aGlzLiRlbC5vZmZzZXRXaWR0aCwKICAgICAgICBoZWlnaHQ6IHRoaXMuJGVsLm9mZnNldEhlaWdodAogICAgICB9OwogICAgfQoKICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9HTF9PUFRJT05TLCB0aGlzLmdsT3B0aW9ucywgewogICAgICBjYW52YXM6IHRoaXMuJHJlZnMuY2FudmFzCiAgICB9KTsKICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcihvcHRpb25zKTsKICAgIHRoaXMucmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlOwogICAgdGhpcy5yZW5kZXJlci5vdXRwdXRFbmNvZGluZyA9IHRoaXMub3V0cHV0RW5jb2Rpbmc7CiAgICB0aGlzLmNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHModGhpcy5jYW1lcmEsIHRoaXMuJGVsKTsKICAgIHRoaXMuY29udHJvbHMudHlwZSA9ICdvcmJpdCc7CiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLndyYXBwZXIpOwogICAgdGhpcy5sb2FkKCk7CiAgICB0aGlzLnVwZGF0ZSgpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93biwgZmFsc2UpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgZmFsc2UpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcy5vbk1vdXNlV2hlZWwsIGZhbHNlKTsKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCBmYWxzZSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZSwgZmFsc2UpOwogICAgdGhpcy5hbmltYXRlKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yZXFJZCk7CiAgICB0aGlzLnJlbmRlcmVyLmRpc3Bvc2UoKTsKCiAgICBpZiAodGhpcy5jb250cm9scykgewogICAgICB0aGlzLmNvbnRyb2xzLmRpc3Bvc2UoKTsKICAgIH0KCiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAsIGZhbHNlKTsKICAgIHRoaXMuJGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCB0aGlzLm9uTW91c2VXaGVlbCwgZmFsc2UpOwogICAgdGhpcy4kZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIGZhbHNlKTsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplLCBmYWxzZSk7CiAgfSwKICB3YXRjaDogewogICAgc3JjOiBmdW5jdGlvbiBzcmMoKSB7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGNhbWVyYVJvdGF0aW9uOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhbWVyYSkgcmV0dXJuOwogICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0aW9uLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfQogICAgfSwKICAgIGNhbWVyYVBvc2l0aW9uOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhbWVyYSkgcmV0dXJuOwogICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfQogICAgfSwKICAgIHJvdGF0aW9uOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLm9iamVjdCkgcmV0dXJuOwogICAgICAgIHRoaXMub2JqZWN0LnJvdGF0aW9uLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfQogICAgfSwKICAgIHBvc2l0aW9uOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLm9iamVjdCkgcmV0dXJuOwogICAgICAgIHRoaXMub2JqZWN0LnBvc2l0aW9uLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfQogICAgfSwKICAgIHNjYWxlOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLm9iamVjdCkgcmV0dXJuOwogICAgICAgIHRoaXMub2JqZWN0LnNjYWxlLnNldCh2YWwueCwgdmFsLnksIHZhbC56KTsKICAgICAgfQogICAgfSwKICAgIGxpZ2h0czogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMudXBkYXRlTGlnaHRzKCk7CiAgICAgIH0KICAgIH0sCiAgICBzaXplOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy51cGRhdGVDYW1lcmEoKTsKICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBjb250cm9sc09wdGlvbnM6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7CiAgICAgIH0KICAgIH0sCiAgICBiYWNrZ3JvdW5kQWxwaGE6IGZ1bmN0aW9uIGJhY2tncm91bmRBbHBoYSgpIHsKICAgICAgdGhpcy51cGRhdGVSZW5kZXJlcigpOwogICAgfSwKICAgIGJhY2tncm91bmRDb2xvcjogZnVuY3Rpb24gYmFja2dyb3VuZENvbG9yKCkgewogICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVyKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblJlc2l6ZTogZnVuY3Rpb24gb25SZXNpemUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuaGVpZ2h0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5zaXplID0gewogICAgICAgICAgICB3aWR0aDogX3RoaXMuJGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IF90aGlzLiRlbC5vZmZzZXRIZWlnaHQKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLmhhc0xpc3RlbmVyWydvbi1tb3VzZWRvd24nXSkgcmV0dXJuOwogICAgICB2YXIgaW50ZXJzZWN0ZWQgPSB0aGlzLnBpY2soZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgIHRoaXMuJGVtaXQoJ29uLW1vdXNlZG93bicsIGludGVyc2VjdGVkKTsKICAgIH0sCiAgICBvbk1vdXNlTW92ZTogZnVuY3Rpb24gb25Nb3VzZU1vdmUoZXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLmhhc0xpc3RlbmVyWydvbi1tb3VzZW1vdmUnXSkgcmV0dXJuOwogICAgICB2YXIgaW50ZXJzZWN0ZWQgPSB0aGlzLnBpY2soZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgIHRoaXMuJGVtaXQoJ29uLW1vdXNlbW92ZScsIHsKICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLAogICAgICAgIGludGVyc2VjdGVkOiBpbnRlcnNlY3RlZAogICAgICB9KTsKICAgIH0sCiAgICBvbk1vdXNlVXA6IGZ1bmN0aW9uIG9uTW91c2VVcChldmVudCkgewogICAgICBpZiAoIXRoaXMuaGFzTGlzdGVuZXJbJ29uLW1vdXNldXAnXSkgcmV0dXJuOwogICAgICB2YXIgaW50ZXJzZWN0ZWQgPSB0aGlzLnBpY2soZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgIHRoaXMuJGVtaXQoJ29uLW1vdXNldXAnLCBpbnRlcnNlY3RlZCk7CiAgICB9LAogICAgb25Nb3VzZVdoZWVsOiBmdW5jdGlvbiBvbk1vdXNlV2hlZWwoZXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLmhhc0xpc3RlbmVyWydvbi1tb3VzZXdoZWVsJ10pIHJldHVybjsKICAgICAgdmFyIGludGVyc2VjdGVkID0gdGhpcy5waWNrKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICB0aGlzLiRlbWl0KCdvbi1tb3VzZXdoZWVsJywgaW50ZXJzZWN0ZWQpOwogICAgfSwKICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLmhhc0xpc3RlbmVyWydvbi1jbGljayddKSByZXR1cm47CiAgICAgIHZhciBpbnRlcnNlY3RlZCA9IHRoaXMucGljayhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgICAgdGhpcy4kZW1pdCgnb24tY2xpY2snLCBpbnRlcnNlY3RlZCk7CiAgICB9LAogICAgcGljazogZnVuY3Rpb24gcGljayh4LCB5KSB7CiAgICAgIGlmICghdGhpcy5vYmplY3QpIHJldHVybiBudWxsOwogICAgICB2YXIgcmVjdCA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB4IC09IHJlY3QubGVmdDsKICAgICAgeSAtPSByZWN0LnRvcDsKICAgICAgdGhpcy5tb3VzZS54ID0geCAvIHRoaXMuc2l6ZS53aWR0aCAqIDIgLSAxOwogICAgICB0aGlzLm1vdXNlLnkgPSAtKHkgLyB0aGlzLnNpemUuaGVpZ2h0KSAqIDIgKyAxOwogICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTsKICAgICAgdmFyIGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3QodGhpcy5vYmplY3QsIHRydWUpOwogICAgICByZXR1cm4gKGludGVyc2VjdHMgJiYgaW50ZXJzZWN0cy5sZW5ndGgpID4gMCA/IGludGVyc2VjdHNbMF0gOiBudWxsOwogICAgfSwKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVyKCk7CiAgICAgIHRoaXMudXBkYXRlQ2FtZXJhKCk7CiAgICAgIHRoaXMudXBkYXRlTGlnaHRzKCk7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbHMoKTsKICAgIH0sCiAgICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7CiAgICAgIHZhciBvYmplY3QgPSB0aGlzLm9iamVjdDsKICAgICAgaWYgKCFvYmplY3QpIHJldHVybjsKICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjsKICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbjsKICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZTsKICAgICAgb2JqZWN0LnBvc2l0aW9uLnNldChwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KTsKICAgICAgb2JqZWN0LnJvdGF0aW9uLnNldChyb3RhdGlvbi54LCByb3RhdGlvbi55LCByb3RhdGlvbi56KTsKICAgICAgb2JqZWN0LnNjYWxlLnNldChzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTsKICAgIH0sCiAgICB1cGRhdGVSZW5kZXJlcjogZnVuY3Rpb24gdXBkYXRlUmVuZGVyZXIoKSB7CiAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7CiAgICAgIHJlbmRlcmVyLnNldFNpemUodGhpcy5zaXplLndpZHRoLCB0aGlzLnNpemUuaGVpZ2h0KTsKICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKTsKICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcihuZXcgQ29sb3IodGhpcy5iYWNrZ3JvdW5kQ29sb3IpLmdldEhleCgpKTsKICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJBbHBoYSh0aGlzLmJhY2tncm91bmRBbHBoYSk7CiAgICB9LAogICAgdXBkYXRlQ2FtZXJhOiBmdW5jdGlvbiB1cGRhdGVDYW1lcmEoKSB7CiAgICAgIHZhciBjYW1lcmEgPSB0aGlzLmNhbWVyYTsKICAgICAgdmFyIG9iamVjdCA9IHRoaXMub2JqZWN0OwogICAgICBjYW1lcmEuYXNwZWN0ID0gdGhpcy5zaXplLndpZHRoIC8gdGhpcy5zaXplLmhlaWdodDsKICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKCiAgICAgIGlmICghdGhpcy5jYW1lcmFMb29rQXQgJiYgIXRoaXMuY2FtZXJhVXApIHsKICAgICAgICBpZiAoIW9iamVjdCkgcmV0dXJuOwogICAgICAgIHZhciBkaXN0YW5jZSA9IGdldFNpemUob2JqZWN0KS5sZW5ndGgoKTsKICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KHRoaXMuY2FtZXJhUG9zaXRpb24ueCwgdGhpcy5jYW1lcmFQb3NpdGlvbi55LCB0aGlzLmNhbWVyYVBvc2l0aW9uLnopOwogICAgICAgIGNhbWVyYS5yb3RhdGlvbi5zZXQodGhpcy5jYW1lcmFSb3RhdGlvbi54LCB0aGlzLmNhbWVyYVJvdGF0aW9uLnksIHRoaXMuY2FtZXJhUm90YXRpb24ueik7CgogICAgICAgIGlmICh0aGlzLmNhbWVyYVBvc2l0aW9uLnggPT09IDAgJiYgdGhpcy5jYW1lcmFQb3NpdGlvbi55ID09PSAwICYmIHRoaXMuY2FtZXJhUG9zaXRpb24ueiA9PT0gMCkgewogICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnogPSBkaXN0YW5jZTsKICAgICAgICB9CgogICAgICAgIGNhbWVyYS5sb29rQXQobmV3IFZlY3RvcjMoKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCh0aGlzLmNhbWVyYVBvc2l0aW9uLngsIHRoaXMuY2FtZXJhUG9zaXRpb24ueSwgdGhpcy5jYW1lcmFQb3NpdGlvbi56KTsKICAgICAgICBjYW1lcmEucm90YXRpb24uc2V0KHRoaXMuY2FtZXJhUm90YXRpb24ueCwgdGhpcy5jYW1lcmFSb3RhdGlvbi55LCB0aGlzLmNhbWVyYVJvdGF0aW9uLnopOwogICAgICAgIGNhbWVyYS51cC5zZXQodGhpcy5jYW1lcmFVcC54LCB0aGlzLmNhbWVyYVVwLnksIHRoaXMuY2FtZXJhVXAueik7CiAgICAgICAgY2FtZXJhLmxvb2tBdChuZXcgVmVjdG9yMyh0aGlzLmNhbWVyYUxvb2tBdC54LCB0aGlzLmNhbWVyYUxvb2tBdC55LCB0aGlzLmNhbWVyYUxvb2tBdC56KSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVMaWdodHM6IGZ1bmN0aW9uIHVwZGF0ZUxpZ2h0cygpIHsKICAgICAgdmFyIF90aGlzJHNjZW5lLAogICAgICAgICAgX3RoaXMyID0gdGhpczsKCiAgICAgIChfdGhpcyRzY2VuZSA9IHRoaXMuc2NlbmUpLnJlbW92ZS5hcHBseShfdGhpcyRzY2VuZSwgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuYWxsTGlnaHRzKSk7CgogICAgICB0aGlzLmFsbExpZ2h0cyA9IFtdOwogICAgICB0aGlzLmxpZ2h0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKCFpdGVtLnR5cGUpIHJldHVybjsKICAgICAgICB2YXIgdHlwZSA9IGl0ZW0udHlwZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHZhciBsaWdodCA9IG51bGw7CgogICAgICAgIGlmICh0eXBlID09PSAnYW1iaWVudCcgfHwgdHlwZSA9PT0gJ2FtYmllbnRsaWdodCcpIHsKICAgICAgICAgIHZhciBjb2xvciA9IGl0ZW0uY29sb3IgPT09IDB4MDAwMDAwID8gaXRlbS5jb2xvciA6IGl0ZW0uY29sb3IgfHwgMHg0MDQwNDA7CiAgICAgICAgICB2YXIgaW50ZW5zaXR5ID0gaXRlbS5pbnRlbnNpdHkgPT09IDAgPyBpdGVtLmludGVuc2l0eSA6IGl0ZW0uaW50ZW5zaXR5IHx8IDE7CiAgICAgICAgICBsaWdodCA9IG5ldyBBbWJpZW50TGlnaHQoY29sb3IsIGludGVuc2l0eSk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG9pbnQnIHx8IHR5cGUgPT09ICdwb2ludGxpZ2h0JykgewogICAgICAgICAgdmFyIF9jb2xvciA9IGl0ZW0uY29sb3IgPT09IDB4MDAwMDAwID8gaXRlbS5jb2xvciA6IGl0ZW0uY29sb3IgfHwgMHhmZmZmZmY7CgogICAgICAgICAgdmFyIF9pbnRlbnNpdHkgPSBpdGVtLmludGVuc2l0eSA9PT0gMCA/IGl0ZW0uaW50ZW5zaXR5IDogaXRlbS5pbnRlbnNpdHkgfHwgMTsKCiAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBpdGVtLmRpc3RhbmNlIHx8IDA7CiAgICAgICAgICB2YXIgZGVjYXkgPSBpdGVtLmRlY2F5ID09PSAwID8gaXRlbS5kZWNheSA6IGl0ZW0uZGVjYXkgfHwgMTsKICAgICAgICAgIGxpZ2h0ID0gbmV3IFBvaW50TGlnaHQoX2NvbG9yLCBfaW50ZW5zaXR5LCBkaXN0YW5jZSwgZGVjYXkpOwoKICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKSB7CiAgICAgICAgICAgIGxpZ2h0LnBvc2l0aW9uLmNvcHkoaXRlbS5wb3NpdGlvbik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZGlyZWN0aW9uYWwnIHx8IHR5cGUgPT09ICdkaXJlY3Rpb25hbGxpZ2h0JykgewogICAgICAgICAgdmFyIF9jb2xvcjIgPSBpdGVtLmNvbG9yID09PSAweDAwMDAwMCA/IGl0ZW0uY29sb3IgOiBpdGVtLmNvbG9yIHx8IDB4ZmZmZmZmOwoKICAgICAgICAgIHZhciBfaW50ZW5zaXR5MiA9IGl0ZW0uaW50ZW5zaXR5ID09PSAwID8gaXRlbS5pbnRlbnNpdHkgOiBpdGVtLmludGVuc2l0eSB8fCAxOwoKICAgICAgICAgIGxpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoX2NvbG9yMiwgX2ludGVuc2l0eTIpOwoKICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKSB7CiAgICAgICAgICAgIGxpZ2h0LnBvc2l0aW9uLmNvcHkoaXRlbS5wb3NpdGlvbik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGl0ZW0udGFyZ2V0KSB7CiAgICAgICAgICAgIGxpZ2h0LnRhcmdldC5jb3B5KGl0ZW0udGFyZ2V0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdoZW1pc3BoZXJlJyB8fCB0eXBlID09PSAnaGVtaXNwaGVyZWxpZ2h0JykgewogICAgICAgICAgdmFyIHNreUNvbG9yID0gaXRlbS5za3lDb2xvciA9PT0gMHgwMDAwMDAgPyBpdGVtLnNreUNvbG9yIDogaXRlbS5za3lDb2xvciB8fCAweGZmZmZmZjsKICAgICAgICAgIHZhciBncm91bmRDb2xvciA9IGl0ZW0uZ3JvdW5kQ29sb3IgPT09IDB4MDAwMDAwID8gaXRlbS5ncm91bmRDb2xvciA6IGl0ZW0uZ3JvdW5kQ29sb3IgfHwgMHhmZmZmZmY7CgogICAgICAgICAgdmFyIF9pbnRlbnNpdHkzID0gaXRlbS5pbnRlbnNpdHkgPT09IDAgPyBpdGVtLmludGVuc2l0eSA6IGl0ZW0uaW50ZW5zaXR5IHx8IDE7CgogICAgICAgICAgbGlnaHQgPSBuZXcgSGVtaXNwaGVyZUxpZ2h0KHNreUNvbG9yLCBncm91bmRDb2xvciwgX2ludGVuc2l0eTMpOwoKICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKSB7CiAgICAgICAgICAgIGxpZ2h0LnBvc2l0aW9uLmNvcHkoaXRlbS5wb3NpdGlvbik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdGhpczIuYWxsTGlnaHRzLnB1c2gobGlnaHQpOwoKICAgICAgICBfdGhpczIuc2NlbmUuYWRkKGxpZ2h0KTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlQ29udHJvbHM6IGZ1bmN0aW9uIHVwZGF0ZUNvbnRyb2xzKCkgewogICAgICBpZiAodGhpcy5jb250cm9sc09wdGlvbnMpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udHJvbHMsIHRoaXMuY29udHJvbHNPcHRpb25zKTsKICAgICAgfQogICAgfSwKICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnNyYykgcmV0dXJuOwoKICAgICAgaWYgKHRoaXMub2JqZWN0KSB7CiAgICAgICAgdGhpcy53cmFwcGVyLnJlbW92ZSh0aGlzLm9iamVjdCk7CiAgICAgIH0KCiAgICAgIHRoaXMubG9hZGVyLnNldFJlcXVlc3RIZWFkZXIodGhpcy5yZXF1ZXN0SGVhZGVyKTsKICAgICAgdGhpcy5sb2FkZXIubG9hZCh0aGlzLnNyYywgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmplY3QgPSBfdGhpczMuZ2V0T2JqZWN0LmFwcGx5KF90aGlzMywgYXJndW1lbnRzKTsKCiAgICAgICAgaWYgKF90aGlzMy5wcm9jZXNzKSB7CiAgICAgICAgICBfdGhpczMucHJvY2VzcyhvYmplY3QpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMzLmFkZE9iamVjdChvYmplY3QpOwoKICAgICAgICBfdGhpczMuJGVtaXQoJ29uLWxvYWQnKTsKICAgICAgfSwgZnVuY3Rpb24gKHhocikgewogICAgICAgIF90aGlzMy4kZW1pdCgnb24tcHJvZ3Jlc3MnLCB4aHIpOwogICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMzLiRlbWl0KCdvbi1lcnJvcicsIGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGdldE9iamVjdDogZnVuY3Rpb24gZ2V0T2JqZWN0KG9iamVjdCkgewogICAgICByZXR1cm4gb2JqZWN0OwogICAgfSwKICAgIGFkZE9iamVjdDogZnVuY3Rpb24gYWRkT2JqZWN0KG9iamVjdCkgewogICAgICB2YXIgY2VudGVyID0gZ2V0Q2VudGVyKG9iamVjdCk7IC8vIGNvcnJlY3Rpb24gcG9zaXRpb24KCiAgICAgIHRoaXMud3JhcHBlci5wb3NpdGlvbi5jb3B5KGNlbnRlci5uZWdhdGUoKSk7CiAgICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0OwogICAgICB0aGlzLndyYXBwZXIuYWRkKG9iamVjdCk7CiAgICAgIHRoaXMudXBkYXRlQ2FtZXJhKCk7CiAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTsKICAgIH0sCiAgICBhbmltYXRlOiBmdW5jdGlvbiBhbmltYXRlKCkgewogICAgICB0aGlzLnJlcUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0ZSk7CiAgICAgIHRoaXMucmVuZGVyKCk7CiAgICB9LAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["Object3D","Vector2","Vector3","Color","Scene","Raycaster","WebGLRenderer","PerspectiveCamera","AmbientLight","PointLight","HemisphereLight","DirectionalLight","LinearEncoding","antialias","alpha","props","src","type","width","height","position","x","y","z","rotation","scale","lights","cameraPosition","cameraRotation","cameraUp","cameraLookAt","backgroundColor","backgroundAlpha","controlsOptions","crossOrigin","requestHeader","outputEncoding","glOptions","data","suportWebGL","size","object","raycaster","mouse","camera","scene","wrapper","renderer","controls","allLights","clock","reqId","computed","hasListener","result","mounted","canvas","window","beforeDestroy","cancelAnimationFrame","watch","deep","handler","val","methods","onResize","onMouseDown","event","onMouseMove","intersected","onMouseUp","onMouseWheel","onClick","pick","update","updateModel","updateRenderer","updateCamera","updateLights","light","updateControls","Object","load","getObject","addObject","animate","render"],"sourceRoot":"src","sources":["model-mixin.vue"],"sourcesContent":["<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n    <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\n    <div v-else>\n      <slot>\n        Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport {\n  Object3D,\n  Vector2,\n  Vector3,\n  Color,\n  Scene,\n  Raycaster,\n  WebGLRenderer,\n  PerspectiveCamera,\n  AmbientLight,\n  PointLight,\n  HemisphereLight,\n  DirectionalLight,\n  LinearEncoding,\n} from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { getSize, getCenter } from './util';\n\nconst suportWebGL = (() => {\n  try {\n    const canvas = document.createElement('canvas');\n    return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n  } catch (e) {\n    return false;\n  }\n})();\n\nconst DEFAULT_GL_OPTIONS = {\n  antialias: true,\n  alpha: true,\n};\n\nexport default {\n  props: {\n    src: {\n      type: String,\n    },\n    width: {\n      type: Number,\n    },\n    height: {\n      type: Number,\n    },\n    position: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    rotation: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    scale: {\n      type: Object,\n      default() {\n        return { x: 1, y: 1, z: 1 };\n      },\n    },\n    lights: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    cameraPosition: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    cameraRotation: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    cameraUp: {\n      type: Object,\n    },\n    cameraLookAt: {\n      type: Object,\n    },\n    backgroundColor: {\n      default: 0xffffff,\n    },\n    backgroundAlpha: {\n      type: Number,\n      default: 1,\n    },\n    controlsOptions: {\n      type: Object,\n    },\n    crossOrigin: {\n      default: 'anonymous',\n    },\n    requestHeader: {\n      default: () => {},\n    },\n    outputEncoding: {\n      type: Number,\n      default: LinearEncoding,\n    },\n    glOptions: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      suportWebGL,\n      size: {\n        width: this.width,\n        height: this.height,\n      },\n      object: null,\n      raycaster: new Raycaster(),\n      mouse: new Vector2(),\n      camera: new PerspectiveCamera(45, 1, 0.01, 100000),\n      scene: new Scene(),\n      wrapper: new Object3D(),\n      renderer: null,\n      controls: null,\n      allLights: [],\n      clock: typeof performance === 'undefined' ? Date : performance,\n      reqId: null, // requestAnimationFrame id\n    };\n  },\n  computed: {\n    hasListener() {\n      /* eslint-disable no-underscore-dangle */\n      const events = this._events;\n      const result = {};\n\n      ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-mousewheel', 'on-click'].forEach((name) => {\n        result[name] = !!events[name] && events[name].length > 0;\n      });\n\n      return result;\n    },\n  },\n  mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight,\n      };\n    }\n\n    const options = Object.assign({}, DEFAULT_GL_OPTIONS, this.glOptions, {\n      canvas: this.$refs.canvas,\n    });\n\n    this.renderer = new WebGLRenderer(options);\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.outputEncoding = this.outputEncoding;\n\n    this.controls = new OrbitControls(this.camera, this.$el);\n    this.controls.type = 'orbit';\n\n    this.scene.add(this.wrapper);\n\n    this.load();\n    this.update();\n\n    this.$el.addEventListener('mousedown', this.onMouseDown, false);\n    this.$el.addEventListener('mousemove', this.onMouseMove, false);\n    this.$el.addEventListener('mouseup', this.onMouseUp, false);\n    this.$el.addEventListener('mousewheel', this.onMouseWheel, false);\n    this.$el.addEventListener('click', this.onClick, false);\n\n    window.addEventListener('resize', this.onResize, false);\n\n    this.animate();\n  },\n  beforeDestroy() {\n    cancelAnimationFrame(this.reqId);\n\n    this.renderer.dispose();\n\n    if (this.controls) {\n      this.controls.dispose();\n    }\n\n    this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n    this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n    this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n    this.$el.removeEventListener('mousewheel', this.onMouseWheel, false);\n    this.$el.removeEventListener('click', this.onClick, false);\n\n    window.removeEventListener('resize', this.onResize, false);\n  },\n  watch: {\n    src() {\n      this.load();\n    },\n    cameraRotation: {\n      deep: true,\n      handler(val) {\n        if (!this.camera) return;\n        this.camera.rotation.set(val.x, val.y, val.z);\n      },\n    },\n    cameraPosition: {\n      deep: true,\n      handler(val) {\n        if (!this.camera) return;\n        this.camera.position.set(val.x, val.y, val.z);\n      },\n    },\n    rotation: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.rotation.set(val.x, val.y, val.z);\n      },\n    },\n    position: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.position.set(val.x, val.y, val.z);\n      },\n    },\n    scale: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.scale.set(val.x, val.y, val.z);\n      },\n    },\n    lights: {\n      deep: true,\n      handler() {\n        this.updateLights();\n      },\n    },\n    size: {\n      deep: true,\n      handler() {\n        this.updateCamera();\n        this.updateRenderer();\n      },\n    },\n    controlsOptions: {\n      deep: true,\n      handler() {\n        this.updateControls();\n      },\n    },\n    backgroundAlpha() {\n      this.updateRenderer();\n    },\n    backgroundColor() {\n      this.updateRenderer();\n    },\n  },\n  methods: {\n    onResize() {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight,\n          };\n        });\n      }\n    },\n    onMouseDown(event) {\n      if (!this.hasListener['on-mousedown']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousedown', intersected);\n    },\n    onMouseMove(event) {\n      if (!this.hasListener['on-mousemove']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousemove', { camera: this.camera, intersected });\n    },\n    onMouseUp(event) {\n      if (!this.hasListener['on-mouseup']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mouseup', intersected);\n    },\n    onMouseWheel(event) {\n      if (!this.hasListener['on-mousewheel']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousewheel', intersected);\n    },\n    onClick(event) {\n      if (!this.hasListener['on-click']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-click', intersected);\n    },\n    pick(x, y) {\n      if (!this.object) return null;\n\n      const rect = this.$el.getBoundingClientRect();\n\n      x -= rect.left;\n      y -= rect.top;\n\n      this.mouse.x = (x / this.size.width) * 2 - 1;\n      this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n\n      const intersects = this.raycaster.intersectObject(this.object, true);\n\n      return (intersects && intersects.length) > 0 ? intersects[0] : null;\n    },\n    update() {\n      this.updateRenderer();\n      this.updateCamera();\n      this.updateLights();\n      this.updateControls();\n    },\n    updateModel() {\n      const { object } = this;\n\n      if (!object) return;\n\n      const { position } = this;\n      const { rotation } = this;\n      const { scale } = this;\n\n      object.position.set(position.x, position.y, position.z);\n      object.rotation.set(rotation.x, rotation.y, rotation.z);\n      object.scale.set(scale.x, scale.y, scale.z);\n    },\n    updateRenderer() {\n      const { renderer } = this;\n\n      renderer.setSize(this.size.width, this.size.height);\n      renderer.setPixelRatio(window.devicePixelRatio || 1);\n      renderer.setClearColor(new Color(this.backgroundColor).getHex());\n      renderer.setClearAlpha(this.backgroundAlpha);\n    },\n    updateCamera() {\n      const { camera } = this;\n      const { object } = this;\n\n      camera.aspect = this.size.width / this.size.height;\n      camera.updateProjectionMatrix();\n\n      if (!this.cameraLookAt && !this.cameraUp) {\n        if (!object) return;\n\n        const distance = getSize(object).length();\n\n        camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n        camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n\n        if (this.cameraPosition.x === 0 && this.cameraPosition.y === 0 && this.cameraPosition.z === 0) {\n          camera.position.z = distance;\n        }\n\n        camera.lookAt(new Vector3());\n      } else {\n        camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n        camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n        camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\n\n        camera.lookAt(new Vector3(this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\n      }\n    },\n    updateLights() {\n      this.scene.remove(...this.allLights);\n\n      this.allLights = [];\n\n      this.lights.forEach((item) => {\n        if (!item.type) return;\n\n        const type = item.type.toLowerCase();\n\n        let light = null;\n\n        if (type === 'ambient' || type === 'ambientlight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0x404040;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new AmbientLight(color, intensity);\n        } else if (type === 'point' || type === 'pointlight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n          const distance = item.distance || 0;\n          const decay = item.decay === 0 ? item.decay : item.decay || 1;\n\n          light = new PointLight(color, intensity, distance, decay);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n        } else if (type === 'directional' || type === 'directionallight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new DirectionalLight(color, intensity);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n\n          if (item.target) {\n            light.target.copy(item.target);\n          }\n        } else if (type === 'hemisphere' || type === 'hemispherelight') {\n          const skyColor = item.skyColor === 0x000000 ? item.skyColor : item.skyColor || 0xffffff;\n          const groundColor = item.groundColor === 0x000000 ? item.groundColor : item.groundColor || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new HemisphereLight(skyColor, groundColor, intensity);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n        }\n\n        this.allLights.push(light);\n        this.scene.add(light);\n      });\n    },\n    updateControls() {\n      if (this.controlsOptions) {\n        Object.assign(this.controls, this.controlsOptions);\n      }\n    },\n    load() {\n      if (!this.src) return;\n\n      if (this.object) {\n        this.wrapper.remove(this.object);\n      }\n\n      this.loader.setRequestHeader(this.requestHeader);\n      this.loader.load(this.src, (...args) => {\n        const object = this.getObject(...args);\n\n        if (this.process) {\n          this.process(object);\n        }\n\n        this.addObject(object);\n\n        this.$emit('on-load');\n      }, (xhr) => {\n        this.$emit('on-progress', xhr);\n      }, (err) => {\n        this.$emit('on-error', err);\n      });\n    },\n    getObject(object) {\n      return object;\n    },\n    addObject(object) {\n      const center = getCenter(object);\n\n      // correction position\n      this.wrapper.position.copy(center.negate());\n\n      this.object = object;\n      this.wrapper.add(object);\n\n      this.updateCamera();\n      this.updateModel();\n    },\n    animate() {\n      this.reqId = requestAnimationFrame(this.animate);\n      this.render();\n    },\n    render() {\n      this.renderer.render(this.scene, this.camera);\n    },\n  },\n};\n\n</script>\n"]}]}