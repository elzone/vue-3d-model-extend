{"remainingRequest":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/thread-loader/dist/cjs.js!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/model-mixin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/src/model-mixin.vue","mtime":1644768294328},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/babel.config.js","mtime":1638514315000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Projects Sources/Elucidly/vue-3d-model-extend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvYWxleC9Qcm9qZWN0cyBTb3VyY2VzL0VsdWNpZGx5L3Z1ZS0zZC1tb2RlbC1leHRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IE9iamVjdDNELCBWZWN0b3IyLCBWZWN0b3IzLCBDb2xvciwgU2NlbmUsIFJheWNhc3RlciwgV2ViR0xSZW5kZXJlciwgUGVyc3BlY3RpdmVDYW1lcmEsIEFtYmllbnRMaWdodCwgUG9pbnRMaWdodCwgSGVtaXNwaGVyZUxpZ2h0LCBEaXJlY3Rpb25hbExpZ2h0LCBMaW5lYXJFbmNvZGluZyB9IGZyb20gJ3RocmVlJzsKaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzJzsKaW1wb3J0IHsgZ2V0U2l6ZSwgZ2V0Q2VudGVyIH0gZnJvbSAnLi91dGlsJzsKCnZhciBzdXBvcnRXZWJHTCA9IGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgcmV0dXJuICEhKHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgJiYgKGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKSkpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0oKTsKCnZhciBERUZBVUxUX0dMX09QVElPTlMgPSB7CiAgYW50aWFsaWFzOiB0cnVlLAogIGFscGhhOiB0cnVlCn07CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgc3JjOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICBwb3NpdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwLAogICAgICAgICAgejogMAogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICByb3RhdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwLAogICAgICAgICAgejogMAogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBzY2FsZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHg6IDEsCiAgICAgICAgICB5OiAxLAogICAgICAgICAgejogMQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBsaWdodHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgY2FtZXJhUG9zaXRpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB4OiAwLAogICAgICAgICAgeTogMCwKICAgICAgICAgIHo6IDAKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgY2FtZXJhUm90YXRpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB4OiAwLAogICAgICAgICAgeTogMCwKICAgICAgICAgIHo6IDAKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgY2FtZXJhVXA6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgY2FtZXJhTG9va0F0OiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIGJhY2tncm91bmRDb2xvcjogewogICAgICAiZGVmYXVsdCI6IDB4ZmZmZmZmCiAgICB9LAogICAgYmFja2dyb3VuZEFscGhhOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgImRlZmF1bHQiOiAxCiAgICB9LAogICAgY29udHJvbHNPcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIGNyb3NzT3JpZ2luOiB7CiAgICAgICJkZWZhdWx0IjogJ2Fub255bW91cycKICAgIH0sCiAgICByZXF1ZXN0SGVhZGVyOiB7CiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfSwKICAgIG91dHB1dEVuY29kaW5nOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgImRlZmF1bHQiOiBMaW5lYXJFbmNvZGluZwogICAgfSwKICAgIGdsT3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdXBvcnRXZWJHTDogc3Vwb3J0V2ViR0wsCiAgICAgIHNpemU6IHsKICAgICAgICB3aWR0aDogdGhpcy53aWR0aCwKICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0CiAgICAgIH0sCiAgICAgIG9iamVjdDogbnVsbCwKICAgICAgcmF5Y2FzdGVyOiBuZXcgUmF5Y2FzdGVyKCksCiAgICAgIG1vdXNlOiBuZXcgVmVjdG9yMigpLAogICAgICBjYW1lcmE6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSg0NSwgMSwgMC4wMSwgMTAwMDAwKSwKICAgICAgc2NlbmU6IG5ldyBTY2VuZSgpLAogICAgICB3cmFwcGVyOiBuZXcgT2JqZWN0M0QoKSwKICAgICAgcmVuZGVyZXI6IG51bGwsCiAgICAgIGNvbnRyb2xzOiBudWxsLAogICAgICBhbGxMaWdodHM6IFtdLAogICAgICBjbG9jazogdHlwZW9mIHBlcmZvcm1hbmNlID09PSAndW5kZWZpbmVkJyA/IERhdGUgOiBwZXJmb3JtYW5jZSwKICAgICAgcmVxSWQ6IG51bGwgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGlkCgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNMaXN0ZW5lcjogZnVuY3Rpb24gaGFzTGlzdGVuZXIoKSB7CiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVyc2NvcmUtZGFuZ2xlICovCiAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgWydvbi1tb3VzZW1vdmUnLCAnb24tbW91c2V1cCcsICdvbi1tb3VzZWRvd24nLCAnb24tbW91c2V3aGVlbCcsICdvbi1jbGljayddLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXN1bHRbbmFtZV0gPSAhIWV2ZW50c1tuYW1lXSAmJiBldmVudHNbbmFtZV0ubGVuZ3RoID4gMDsKICAgICAgfSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMud2lkdGggPT09IHVuZGVmaW5lZCB8fCB0aGlzLmhlaWdodCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHsKICAgICAgICB3aWR0aDogdGhpcy4kZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgaGVpZ2h0OiB0aGlzLiRlbC5vZmZzZXRIZWlnaHQKICAgICAgfTsKICAgIH0KCiAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfR0xfT1BUSU9OUywgdGhpcy5nbE9wdGlvbnMsIHsKICAgICAgY2FudmFzOiB0aGlzLiRyZWZzLmNhbnZhcwogICAgfSk7CiAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFdlYkdMUmVuZGVyZXIob3B0aW9ucyk7CiAgICB0aGlzLnJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTsKICAgIHRoaXMucmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgPSB0aGlzLm91dHB1dEVuY29kaW5nOwogICAgdGhpcy5jb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKHRoaXMuY2FtZXJhLCB0aGlzLiRlbCk7CiAgICB0aGlzLmNvbnRyb2xzLnR5cGUgPSAnb3JiaXQnOwogICAgdGhpcy5zY2VuZS5hZGQodGhpcy53cmFwcGVyKTsKICAgIHRoaXMubG9hZCgpOwogICAgdGhpcy51cGRhdGUoKTsKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24sIGZhbHNlKTsKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUsIGZhbHNlKTsKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCwgZmFsc2UpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMub25Nb3VzZVdoZWVsLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgZmFsc2UpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUsIGZhbHNlKTsKICAgIHRoaXMuYW5pbWF0ZSgpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxSWQpOwogICAgdGhpcy5yZW5kZXJlci5kaXNwb3NlKCk7CgogICAgaWYgKHRoaXMuY29udHJvbHMpIHsKICAgICAgdGhpcy5jb250cm9scy5kaXNwb3NlKCk7CiAgICB9CgogICAgdGhpcy4kZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93biwgZmFsc2UpOwogICAgdGhpcy4kZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgZmFsc2UpOwogICAgdGhpcy4kZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwLCBmYWxzZSk7CiAgICB0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcy5vbk1vdXNlV2hlZWwsIGZhbHNlKTsKICAgIHRoaXMuJGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCBmYWxzZSk7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZSwgZmFsc2UpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHNyYzogZnVuY3Rpb24gc3JjKCkgewogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCiAgICBjYW1lcmFSb3RhdGlvbjogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5jYW1lcmEpIHJldHVybjsKICAgICAgICB0aGlzLmNhbWVyYS5yb3RhdGlvbi5zZXQodmFsLngsIHZhbC55LCB2YWwueik7CiAgICAgIH0KICAgIH0sCiAgICBjYW1lcmFQb3NpdGlvbjogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5jYW1lcmEpIHJldHVybjsKICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5zZXQodmFsLngsIHZhbC55LCB2YWwueik7CiAgICAgIH0KICAgIH0sCiAgICByb3RhdGlvbjogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5vYmplY3QpIHJldHVybjsKICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGlvbi5zZXQodmFsLngsIHZhbC55LCB2YWwueik7CiAgICAgIH0KICAgIH0sCiAgICBwb3NpdGlvbjogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5vYmplY3QpIHJldHVybjsKICAgICAgICB0aGlzLm9iamVjdC5wb3NpdGlvbi5zZXQodmFsLngsIHZhbC55LCB2YWwueik7CiAgICAgIH0KICAgIH0sCiAgICBzY2FsZTogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICghdGhpcy5vYmplY3QpIHJldHVybjsKICAgICAgICB0aGlzLm9iamVjdC5zY2FsZS5zZXQodmFsLngsIHZhbC55LCB2YWwueik7CiAgICAgIH0KICAgIH0sCiAgICBsaWdodHM6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnVwZGF0ZUxpZ2h0cygpOwogICAgICB9CiAgICB9LAogICAgc2l6ZTogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMudXBkYXRlQ2FtZXJhKCk7CiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJlcigpOwogICAgICB9CiAgICB9LAogICAgY29udHJvbHNPcHRpb25zOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy51cGRhdGVDb250cm9scygpOwogICAgICB9CiAgICB9LAogICAgYmFja2dyb3VuZEFscGhhOiBmdW5jdGlvbiBiYWNrZ3JvdW5kQWxwaGEoKSB7CiAgICAgIHRoaXMudXBkYXRlUmVuZGVyZXIoKTsKICAgIH0sCiAgICBiYWNrZ3JvdW5kQ29sb3I6IGZ1bmN0aW9uIGJhY2tncm91bmRDb2xvcigpIHsKICAgICAgdGhpcy51cGRhdGVSZW5kZXJlcigpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25SZXNpemU6IGZ1bmN0aW9uIG9uUmVzaXplKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMud2lkdGggPT09IHVuZGVmaW5lZCB8fCB0aGlzLmhlaWdodCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuc2l6ZSA9IHsKICAgICAgICAgICAgd2lkdGg6IF90aGlzLiRlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiBfdGhpcy4kZWwub2Zmc2V0SGVpZ2h0CiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tbW91c2Vkb3duJ10pIHJldHVybjsKICAgICAgdmFyIGludGVyc2VjdGVkID0gdGhpcy5waWNrKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICB0aGlzLiRlbWl0KCdvbi1tb3VzZWRvd24nLCB7CiAgICAgICAgY2FtZXJhOiB0aGlzLmNhbWVyYSwKICAgICAgICBpbnRlcnNlY3RlZDogaW50ZXJzZWN0ZWQKICAgICAgfSk7CiAgICB9LAogICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tbW91c2Vtb3ZlJ10pIHJldHVybjsKICAgICAgdmFyIGludGVyc2VjdGVkID0gdGhpcy5waWNrKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICB0aGlzLiRlbWl0KCdvbi1tb3VzZW1vdmUnLCB7CiAgICAgICAgY2FtZXJhOiB0aGlzLmNhbWVyYSwKICAgICAgICBpbnRlcnNlY3RlZDogaW50ZXJzZWN0ZWQKICAgICAgfSk7CiAgICB9LAogICAgb25Nb3VzZVVwOiBmdW5jdGlvbiBvbk1vdXNlVXAoZXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLmhhc0xpc3RlbmVyWydvbi1tb3VzZXVwJ10pIHJldHVybjsKICAgICAgdmFyIGludGVyc2VjdGVkID0gdGhpcy5waWNrKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICB0aGlzLiRlbWl0KCdvbi1tb3VzZXVwJywgewogICAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsCiAgICAgICAgaW50ZXJzZWN0ZWQ6IGludGVyc2VjdGVkCiAgICAgIH0pOwogICAgfSwKICAgIG9uTW91c2VXaGVlbDogZnVuY3Rpb24gb25Nb3VzZVdoZWVsKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tbW91c2V3aGVlbCddKSByZXR1cm47CiAgICAgIHZhciBpbnRlcnNlY3RlZCA9IHRoaXMucGljayhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgICAgdGhpcy4kZW1pdCgnb24tbW91c2V3aGVlbCcsIHsKICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLAogICAgICAgIGludGVyc2VjdGVkOiBpbnRlcnNlY3RlZAogICAgICB9KTsKICAgIH0sCiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lclsnb24tY2xpY2snXSkgcmV0dXJuOwogICAgICB2YXIgaW50ZXJzZWN0ZWQgPSB0aGlzLnBpY2soZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgIHRoaXMuJGVtaXQoJ29uLWNsaWNrJywgewogICAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsCiAgICAgICAgaW50ZXJzZWN0ZWQ6IGludGVyc2VjdGVkCiAgICAgIH0pOwogICAgfSwKICAgIHBpY2s6IGZ1bmN0aW9uIHBpY2soeCwgeSkgewogICAgICBpZiAoIXRoaXMub2JqZWN0KSByZXR1cm4gbnVsbDsKICAgICAgdmFyIHJlY3QgPSB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgeCAtPSByZWN0LmxlZnQ7CiAgICAgIHkgLT0gcmVjdC50b3A7CiAgICAgIHRoaXMubW91c2UueCA9IHggLyB0aGlzLnNpemUud2lkdGggKiAyIC0gMTsKICAgICAgdGhpcy5tb3VzZS55ID0gLSh5IC8gdGhpcy5zaXplLmhlaWdodCkgKiAyICsgMTsKICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLm1vdXNlLCB0aGlzLmNhbWVyYSk7CiAgICAgIHZhciBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0KHRoaXMub2JqZWN0LCB0cnVlKTsKICAgICAgcmV0dXJuIChpbnRlcnNlY3RzICYmIGludGVyc2VjdHMubGVuZ3RoKSA+IDAgPyBpbnRlcnNlY3RzWzBdIDogbnVsbDsKICAgIH0sCiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdGhpcy51cGRhdGVSZW5kZXJlcigpOwogICAgICB0aGlzLnVwZGF0ZUNhbWVyYSgpOwogICAgICB0aGlzLnVwZGF0ZUxpZ2h0cygpOwogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7CiAgICB9LAogICAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkgewogICAgICB2YXIgb2JqZWN0ID0gdGhpcy5vYmplY3Q7CiAgICAgIGlmICghb2JqZWN0KSByZXR1cm47CiAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb247CiAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMucm90YXRpb247CiAgICAgIHZhciBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIG9iamVjdC5wb3NpdGlvbi5zZXQocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueik7CiAgICAgIG9iamVjdC5yb3RhdGlvbi5zZXQocm90YXRpb24ueCwgcm90YXRpb24ueSwgcm90YXRpb24ueik7CiAgICAgIG9iamVjdC5zY2FsZS5zZXQoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7CiAgICB9LAogICAgdXBkYXRlUmVuZGVyZXI6IGZ1bmN0aW9uIHVwZGF0ZVJlbmRlcmVyKCkgewogICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyOwogICAgICByZW5kZXJlci5zZXRTaXplKHRoaXMuc2l6ZS53aWR0aCwgdGhpcy5zaXplLmhlaWdodCk7CiAgICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSk7CiAgICAgIHJlbmRlcmVyLnNldENsZWFyQ29sb3IobmV3IENvbG9yKHRoaXMuYmFja2dyb3VuZENvbG9yKS5nZXRIZXgoKSk7CiAgICAgIHJlbmRlcmVyLnNldENsZWFyQWxwaGEodGhpcy5iYWNrZ3JvdW5kQWxwaGEpOwogICAgfSwKICAgIHVwZGF0ZUNhbWVyYTogZnVuY3Rpb24gdXBkYXRlQ2FtZXJhKCkgewogICAgICB2YXIgY2FtZXJhID0gdGhpcy5jYW1lcmE7CiAgICAgIHZhciBvYmplY3QgPSB0aGlzLm9iamVjdDsKICAgICAgY2FtZXJhLmFzcGVjdCA9IHRoaXMuc2l6ZS53aWR0aCAvIHRoaXMuc2l6ZS5oZWlnaHQ7CiAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7CgogICAgICBpZiAoIXRoaXMuY2FtZXJhTG9va0F0ICYmICF0aGlzLmNhbWVyYVVwKSB7CiAgICAgICAgaWYgKCFvYmplY3QpIHJldHVybjsKICAgICAgICB2YXIgZGlzdGFuY2UgPSBnZXRTaXplKG9iamVjdCkubGVuZ3RoKCk7CiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCh0aGlzLmNhbWVyYVBvc2l0aW9uLngsIHRoaXMuY2FtZXJhUG9zaXRpb24ueSwgdGhpcy5jYW1lcmFQb3NpdGlvbi56KTsKICAgICAgICBjYW1lcmEucm90YXRpb24uc2V0KHRoaXMuY2FtZXJhUm90YXRpb24ueCwgdGhpcy5jYW1lcmFSb3RhdGlvbi55LCB0aGlzLmNhbWVyYVJvdGF0aW9uLnopOwoKICAgICAgICBpZiAodGhpcy5jYW1lcmFQb3NpdGlvbi54ID09PSAwICYmIHRoaXMuY2FtZXJhUG9zaXRpb24ueSA9PT0gMCAmJiB0aGlzLmNhbWVyYVBvc2l0aW9uLnogPT09IDApIHsKICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi56ID0gZGlzdGFuY2U7CiAgICAgICAgfQoKICAgICAgICBjYW1lcmEubG9va0F0KG5ldyBWZWN0b3IzKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQodGhpcy5jYW1lcmFQb3NpdGlvbi54LCB0aGlzLmNhbWVyYVBvc2l0aW9uLnksIHRoaXMuY2FtZXJhUG9zaXRpb24ueik7CiAgICAgICAgY2FtZXJhLnJvdGF0aW9uLnNldCh0aGlzLmNhbWVyYVJvdGF0aW9uLngsIHRoaXMuY2FtZXJhUm90YXRpb24ueSwgdGhpcy5jYW1lcmFSb3RhdGlvbi56KTsKICAgICAgICBjYW1lcmEudXAuc2V0KHRoaXMuY2FtZXJhVXAueCwgdGhpcy5jYW1lcmFVcC55LCB0aGlzLmNhbWVyYVVwLnopOwogICAgICAgIGNhbWVyYS5sb29rQXQobmV3IFZlY3RvcjModGhpcy5jYW1lcmFMb29rQXQueCwgdGhpcy5jYW1lcmFMb29rQXQueSwgdGhpcy5jYW1lcmFMb29rQXQueikpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlTGlnaHRzOiBmdW5jdGlvbiB1cGRhdGVMaWdodHMoKSB7CiAgICAgIHZhciBfdGhpcyRzY2VuZSwKICAgICAgICAgIF90aGlzMiA9IHRoaXM7CgogICAgICAoX3RoaXMkc2NlbmUgPSB0aGlzLnNjZW5lKS5yZW1vdmUuYXBwbHkoX3RoaXMkc2NlbmUsIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmFsbExpZ2h0cykpOwoKICAgICAgdGhpcy5hbGxMaWdodHMgPSBbXTsKICAgICAgdGhpcy5saWdodHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmICghaXRlbS50eXBlKSByZXR1cm47CiAgICAgICAgdmFyIHR5cGUgPSBpdGVtLnR5cGUudG9Mb3dlckNhc2UoKTsKICAgICAgICB2YXIgbGlnaHQgPSBudWxsOwoKICAgICAgICBpZiAodHlwZSA9PT0gJ2FtYmllbnQnIHx8IHR5cGUgPT09ICdhbWJpZW50bGlnaHQnKSB7CiAgICAgICAgICB2YXIgY29sb3IgPSBpdGVtLmNvbG9yID09PSAweDAwMDAwMCA/IGl0ZW0uY29sb3IgOiBpdGVtLmNvbG9yIHx8IDB4NDA0MDQwOwogICAgICAgICAgdmFyIGludGVuc2l0eSA9IGl0ZW0uaW50ZW5zaXR5ID09PSAwID8gaXRlbS5pbnRlbnNpdHkgOiBpdGVtLmludGVuc2l0eSB8fCAxOwogICAgICAgICAgbGlnaHQgPSBuZXcgQW1iaWVudExpZ2h0KGNvbG9yLCBpbnRlbnNpdHkpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvaW50JyB8fCB0eXBlID09PSAncG9pbnRsaWdodCcpIHsKICAgICAgICAgIHZhciBfY29sb3IgPSBpdGVtLmNvbG9yID09PSAweDAwMDAwMCA/IGl0ZW0uY29sb3IgOiBpdGVtLmNvbG9yIHx8IDB4ZmZmZmZmOwoKICAgICAgICAgIHZhciBfaW50ZW5zaXR5ID0gaXRlbS5pbnRlbnNpdHkgPT09IDAgPyBpdGVtLmludGVuc2l0eSA6IGl0ZW0uaW50ZW5zaXR5IHx8IDE7CgogICAgICAgICAgdmFyIGRpc3RhbmNlID0gaXRlbS5kaXN0YW5jZSB8fCAwOwogICAgICAgICAgdmFyIGRlY2F5ID0gaXRlbS5kZWNheSA9PT0gMCA/IGl0ZW0uZGVjYXkgOiBpdGVtLmRlY2F5IHx8IDE7CiAgICAgICAgICBsaWdodCA9IG5ldyBQb2ludExpZ2h0KF9jb2xvciwgX2ludGVuc2l0eSwgZGlzdGFuY2UsIGRlY2F5KTsKCiAgICAgICAgICBpZiAoaXRlbS5wb3NpdGlvbikgewogICAgICAgICAgICBsaWdodC5wb3NpdGlvbi5jb3B5KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2RpcmVjdGlvbmFsJyB8fCB0eXBlID09PSAnZGlyZWN0aW9uYWxsaWdodCcpIHsKICAgICAgICAgIHZhciBfY29sb3IyID0gaXRlbS5jb2xvciA9PT0gMHgwMDAwMDAgPyBpdGVtLmNvbG9yIDogaXRlbS5jb2xvciB8fCAweGZmZmZmZjsKCiAgICAgICAgICB2YXIgX2ludGVuc2l0eTIgPSBpdGVtLmludGVuc2l0eSA9PT0gMCA/IGl0ZW0uaW50ZW5zaXR5IDogaXRlbS5pbnRlbnNpdHkgfHwgMTsKCiAgICAgICAgICBsaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KF9jb2xvcjIsIF9pbnRlbnNpdHkyKTsKCiAgICAgICAgICBpZiAoaXRlbS5wb3NpdGlvbikgewogICAgICAgICAgICBsaWdodC5wb3NpdGlvbi5jb3B5KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpdGVtLnRhcmdldCkgewogICAgICAgICAgICBsaWdodC50YXJnZXQuY29weShpdGVtLnRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnaGVtaXNwaGVyZScgfHwgdHlwZSA9PT0gJ2hlbWlzcGhlcmVsaWdodCcpIHsKICAgICAgICAgIHZhciBza3lDb2xvciA9IGl0ZW0uc2t5Q29sb3IgPT09IDB4MDAwMDAwID8gaXRlbS5za3lDb2xvciA6IGl0ZW0uc2t5Q29sb3IgfHwgMHhmZmZmZmY7CiAgICAgICAgICB2YXIgZ3JvdW5kQ29sb3IgPSBpdGVtLmdyb3VuZENvbG9yID09PSAweDAwMDAwMCA/IGl0ZW0uZ3JvdW5kQ29sb3IgOiBpdGVtLmdyb3VuZENvbG9yIHx8IDB4ZmZmZmZmOwoKICAgICAgICAgIHZhciBfaW50ZW5zaXR5MyA9IGl0ZW0uaW50ZW5zaXR5ID09PSAwID8gaXRlbS5pbnRlbnNpdHkgOiBpdGVtLmludGVuc2l0eSB8fCAxOwoKICAgICAgICAgIGxpZ2h0ID0gbmV3IEhlbWlzcGhlcmVMaWdodChza3lDb2xvciwgZ3JvdW5kQ29sb3IsIF9pbnRlbnNpdHkzKTsKCiAgICAgICAgICBpZiAoaXRlbS5wb3NpdGlvbikgewogICAgICAgICAgICBsaWdodC5wb3NpdGlvbi5jb3B5KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLmFsbExpZ2h0cy5wdXNoKGxpZ2h0KTsKCiAgICAgICAgX3RoaXMyLnNjZW5lLmFkZChsaWdodCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUNvbnRyb2xzOiBmdW5jdGlvbiB1cGRhdGVDb250cm9scygpIHsKICAgICAgaWYgKHRoaXMuY29udHJvbHNPcHRpb25zKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRyb2xzLCB0aGlzLmNvbnRyb2xzT3B0aW9ucyk7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5zcmMpIHJldHVybjsKCiAgICAgIGlmICh0aGlzLm9iamVjdCkgewogICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmUodGhpcy5vYmplY3QpOwogICAgICB9CgogICAgICB0aGlzLmxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKHRoaXMucmVxdWVzdEhlYWRlcik7CiAgICAgIHRoaXMubG9hZGVyLmxvYWQodGhpcy5zcmMsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqZWN0ID0gX3RoaXMzLmdldE9iamVjdC5hcHBseShfdGhpczMsIGFyZ3VtZW50cyk7CgogICAgICAgIGlmIChfdGhpczMucHJvY2VzcykgewogICAgICAgICAgX3RoaXMzLnByb2Nlc3Mob2JqZWN0KTsKICAgICAgICB9CgogICAgICAgIF90aGlzMy5hZGRPYmplY3Qob2JqZWN0KTsKCiAgICAgICAgX3RoaXMzLiRlbWl0KCdvbi1sb2FkJyk7CiAgICAgIH0sIGZ1bmN0aW9uICh4aHIpIHsKICAgICAgICBfdGhpczMuJGVtaXQoJ29uLXByb2dyZXNzJywgeGhyKTsKICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMy4kZW1pdCgnb24tZXJyb3InLCBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRPYmplY3Q6IGZ1bmN0aW9uIGdldE9iamVjdChvYmplY3QpIHsKICAgICAgcmV0dXJuIG9iamVjdDsKICAgIH0sCiAgICBhZGRPYmplY3Q6IGZ1bmN0aW9uIGFkZE9iamVjdChvYmplY3QpIHsKICAgICAgdmFyIGNlbnRlciA9IGdldENlbnRlcihvYmplY3QpOyAvLyBjb3JyZWN0aW9uIHBvc2l0aW9uCgogICAgICB0aGlzLndyYXBwZXIucG9zaXRpb24uY29weShjZW50ZXIubmVnYXRlKCkpOwogICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDsKICAgICAgdGhpcy53cmFwcGVyLmFkZChvYmplY3QpOwogICAgICB0aGlzLnVwZGF0ZUNhbWVyYSgpOwogICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7CiAgICB9LAogICAgYW5pbWF0ZTogZnVuY3Rpb24gYW5pbWF0ZSgpIHsKICAgICAgdGhpcy5yZXFJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUpOwogICAgICB0aGlzLnJlbmRlcigpOwogICAgfSwKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAaA,SACAA,QADA,EAEAC,OAFA,EAGAC,OAHA,EAIAC,KAJA,EAKAC,KALA,EAMAC,SANA,EAOAC,aAPA,EAQAC,iBARA,EASAC,YATA,EAUAC,UAVA,EAWAC,eAXA,EAYAC,gBAZA,EAaAC,cAbA,QAcA,OAdA;AAeA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAHA,CAGA;AACA;AACA;AACA,CAPA;;AASA;AACAC,iBADA;AAEAC;AAFA;AAKA;AACAC;AACAC;AACAC;AADA,KADA;AAIAC;AACAD;AADA,KAJA;AAOAE;AACAF;AADA,KAPA;AAUAG;AACAH,kBADA;AAAA,qCAEA;AACA;AAAAI;AAAAC;AAAAC;AAAA;AACA;AAJA,KAVA;AAgBAC;AACAP,kBADA;AAAA,qCAEA;AACA;AAAAI;AAAAC;AAAAC;AAAA;AACA;AAJA,KAhBA;AAsBAE;AACAR,kBADA;AAAA,qCAEA;AACA;AAAAI;AAAAC;AAAAC;AAAA;AACA;AAJA,KAtBA;AA4BAG;AACAT,iBADA;AAAA,qCAEA;AACA;AACA;AAJA,KA5BA;AAkCAU;AACAV,kBADA;AAAA,qCAEA;AACA;AAAAI;AAAAC;AAAAC;AAAA;AACA;AAJA,KAlCA;AAwCAK;AACAX,kBADA;AAAA,qCAEA;AACA;AAAAI;AAAAC;AAAAC;AAAA;AACA;AAJA,KAxCA;AA8CAM;AACAZ;AADA,KA9CA;AAiDAa;AACAb;AADA,KAjDA;AAoDAc;AACA;AADA,KApDA;AAuDAC;AACAf,kBADA;AAEA;AAFA,KAvDA;AA2DAgB;AACAhB;AADA,KA3DA;AA8DAiB;AACA;AADA,KA9DA;AAiEAC;AACA;AADA,KAjEA;AAoEAC;AACAnB,kBADA;AAEA;AAFA,KApEA;AAwEAoB;AACApB;AADA;AAxEA,GADA;AA6EAqB,MA7EA,kBA6EA;AACA;AACAC,8BADA;AAEAC;AACAtB,yBADA;AAEAC;AAFA,OAFA;AAMAsB,kBANA;AAOAC,gCAPA;AAQAC,0BARA;AASAC,wDATA;AAUAC,wBAVA;AAWAC,6BAXA;AAYAC,oBAZA;AAaAC,oBAbA;AAcAC,mBAdA;AAeAC,oEAfA;AAgBAC,iBAhBA,CAgBA;;AAhBA;AAkBA,GAhGA;AAiGAC;AACAC,eADA,yBACA;AACA;AACA;AACA;AAEA;AACAC;AACA,OAFA;AAIA;AACA;AAXA,GAjGA;AA8GAC,SA9GA,qBA8GA;AACA;AACA;AACArC,mCADA;AAEAC;AAFA;AAIA;;AAEA;AACAqC;AADA;AAIA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEAC;AAEA;AACA,GA/IA;AAgJAC,eAhJA,2BAgJA;AACAC;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAEAF;AACA,GAhKA;AAiKAG;AACA5C,OADA,iBACA;AACA;AACA,KAHA;AAIAY;AACAiC,gBADA;AAEAC,aAFA,mBAEAC,GAFA,EAEA;AACA;AACA;AACA;AALA,KAJA;AAWApC;AACAkC,gBADA;AAEAC,aAFA,mBAEAC,GAFA,EAEA;AACA;AACA;AACA;AALA,KAXA;AAkBAvC;AACAqC,gBADA;AAEAC,aAFA,mBAEAC,GAFA,EAEA;AACA;AACA;AACA;AALA,KAlBA;AAyBA3C;AACAyC,gBADA;AAEAC,aAFA,mBAEAC,GAFA,EAEA;AACA;AACA;AACA;AALA,KAzBA;AAgCAtC;AACAoC,gBADA;AAEAC,aAFA,mBAEAC,GAFA,EAEA;AACA;AACA;AACA;AALA,KAhCA;AAuCArC;AACAmC,gBADA;AAEAC,aAFA,qBAEA;AACA;AACA;AAJA,KAvCA;AA6CAtB;AACAqB,gBADA;AAEAC,aAFA,qBAEA;AACA;AACA;AACA;AALA,KA7CA;AAoDA7B;AACA4B,gBADA;AAEAC,aAFA,qBAEA;AACA;AACA;AAJA,KApDA;AA0DA9B,mBA1DA,6BA0DA;AACA;AACA,KA5DA;AA6DAD,mBA7DA,6BA6DA;AACA;AACA;AA/DA,GAjKA;AAkOAiC;AACAC,YADA,sBACA;AAAA;;AACA;AACA;AACA;AACA/C,wCADA;AAEAC;AAFA;AAIA,SALA;AAMA;AACA,KAVA;AAWA+C,eAXA,uBAWAC,KAXA,EAWA;AACA;AAEA;AACA;AAAAvB;AAAAwB;AAAA;AACA,KAhBA;AAiBAC,eAjBA,uBAiBAF,KAjBA,EAiBA;AACA;AAEA;AACA;AAAAvB;AAAAwB;AAAA;AACA,KAtBA;AAuBAE,aAvBA,qBAuBAH,KAvBA,EAuBA;AACA;AAEA;AACA;AAAAvB;AAAAwB;AAAA;AACA,KA5BA;AA6BAG,gBA7BA,wBA6BAJ,KA7BA,EA6BA;AACA;AAEA;AACA;AAAAvB;AAAAwB;AAAA;AACA,KAlCA;AAmCAI,WAnCA,mBAmCAL,KAnCA,EAmCA;AACA;AAEA;AACA;AAAAvB;AAAAwB;AAAA;AACA,KAxCA;AAyCAK,QAzCA,gBAyCApD,CAzCA,EAyCAC,CAzCA,EAyCA;AACA;AAEA;AAEAD;AACAC;AAEA;AACA;AAEA;AAEA;AAEA;AACA,KAzDA;AA0DAoD,UA1DA,oBA0DA;AACA;AACA;AACA;AACA;AACA,KA/DA;AAgEAC,eAhEA,yBAgEA;AACA;AAEA;AAEA;AACA;AACA;AAEAlC;AACAA;AACAA;AACA,KA5EA;AA6EAmC,kBA7EA,4BA6EA;AACA;AAEA7B;AACAA;AACAA;AACAA;AACA,KApFA;AAqFA8B,gBArFA,0BAqFA;AACA;AACA;AAEAjC;AACAA;;AAEA;AACA;AAEA;AAEAA;AACAA;;AAEA;AACAA;AACA;;AAEAA;AACA,OAbA,MAaA;AACAA;AACAA;AACAA;AAEAA;AACA;AACA,KAhHA;AAiHAkC,gBAjHA,0BAiHA;AAAA;AAAA;;AACA;;AAEA;AAEA;AACA;AAEA;AAEA;;AAEA;AACA;AACA;AAEAC;AACA,SALA,MAKA;AACA;;AACA;;AACA;AACA;AAEAA;;AAEA;AACAA;AACA;AACA,SAXA,MAWA;AACA;;AACA;;AAEAA;;AAEA;AACAA;AACA;;AAEA;AACAA;AACA;AACA,SAbA,MAaA;AACA;AACA;;AACA;;AAEAA;;AAEA;AACAA;AACA;AACA;;AAEA;;AACA;AACA,OAlDA;AAmDA,KAzKA;AA0KAC,kBA1KA,4BA0KA;AACA;AACAC;AACA;AACA,KA9KA;AA+KAC,QA/KA,kBA+KA;AAAA;;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,OAVA,EAUA;AACA;AACA,OAZA,EAYA;AACA;AACA,OAdA;AAeA,KAtMA;AAuMAC,aAvMA,qBAuMA1C,MAvMA,EAuMA;AACA;AACA,KAzMA;AA0MA2C,aA1MA,qBA0MA3C,MA1MA,EA0MA;AACA,qCADA,CAGA;;AACA;AAEA;AACA;AAEA;AACA;AACA,KArNA;AAsNA4C,WAtNA,qBAsNA;AACA;AACA;AACA,KAzNA;AA0NAC,UA1NA,oBA0NA;AACA;AACA;AA5NA;AAlOA","names":["Object3D","Vector2","Vector3","Color","Scene","Raycaster","WebGLRenderer","PerspectiveCamera","AmbientLight","PointLight","HemisphereLight","DirectionalLight","LinearEncoding","antialias","alpha","props","src","type","width","height","position","x","y","z","rotation","scale","lights","cameraPosition","cameraRotation","cameraUp","cameraLookAt","backgroundColor","backgroundAlpha","controlsOptions","crossOrigin","requestHeader","outputEncoding","glOptions","data","suportWebGL","size","object","raycaster","mouse","camera","scene","wrapper","renderer","controls","allLights","clock","reqId","computed","hasListener","result","mounted","canvas","window","beforeDestroy","cancelAnimationFrame","watch","deep","handler","val","methods","onResize","onMouseDown","event","intersected","onMouseMove","onMouseUp","onMouseWheel","onClick","pick","update","updateModel","updateRenderer","updateCamera","updateLights","light","updateControls","Object","load","getObject","addObject","animate","render"],"sourceRoot":"src","sources":["model-mixin.vue"],"sourcesContent":["<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n    <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\n    <div v-else>\n      <slot>\n        Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport {\n  Object3D,\n  Vector2,\n  Vector3,\n  Color,\n  Scene,\n  Raycaster,\n  WebGLRenderer,\n  PerspectiveCamera,\n  AmbientLight,\n  PointLight,\n  HemisphereLight,\n  DirectionalLight,\n  LinearEncoding,\n} from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { getSize, getCenter } from './util';\n\nconst suportWebGL = (() => {\n  try {\n    const canvas = document.createElement('canvas');\n    return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n  } catch (e) {\n    return false;\n  }\n})();\n\nconst DEFAULT_GL_OPTIONS = {\n  antialias: true,\n  alpha: true,\n};\n\nexport default {\n  props: {\n    src: {\n      type: String,\n    },\n    width: {\n      type: Number,\n    },\n    height: {\n      type: Number,\n    },\n    position: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    rotation: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    scale: {\n      type: Object,\n      default() {\n        return { x: 1, y: 1, z: 1 };\n      },\n    },\n    lights: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    cameraPosition: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    cameraRotation: {\n      type: Object,\n      default() {\n        return { x: 0, y: 0, z: 0 };\n      },\n    },\n    cameraUp: {\n      type: Object,\n    },\n    cameraLookAt: {\n      type: Object,\n    },\n    backgroundColor: {\n      default: 0xffffff,\n    },\n    backgroundAlpha: {\n      type: Number,\n      default: 1,\n    },\n    controlsOptions: {\n      type: Object,\n    },\n    crossOrigin: {\n      default: 'anonymous',\n    },\n    requestHeader: {\n      default: () => {},\n    },\n    outputEncoding: {\n      type: Number,\n      default: LinearEncoding,\n    },\n    glOptions: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      suportWebGL,\n      size: {\n        width: this.width,\n        height: this.height,\n      },\n      object: null,\n      raycaster: new Raycaster(),\n      mouse: new Vector2(),\n      camera: new PerspectiveCamera(45, 1, 0.01, 100000),\n      scene: new Scene(),\n      wrapper: new Object3D(),\n      renderer: null,\n      controls: null,\n      allLights: [],\n      clock: typeof performance === 'undefined' ? Date : performance,\n      reqId: null, // requestAnimationFrame id\n    };\n  },\n  computed: {\n    hasListener() {\n      /* eslint-disable no-underscore-dangle */\n      const events = this._events;\n      const result = {};\n\n      ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-mousewheel', 'on-click'].forEach((name) => {\n        result[name] = !!events[name] && events[name].length > 0;\n      });\n\n      return result;\n    },\n  },\n  mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight,\n      };\n    }\n\n    const options = Object.assign({}, DEFAULT_GL_OPTIONS, this.glOptions, {\n      canvas: this.$refs.canvas,\n    });\n\n    this.renderer = new WebGLRenderer(options);\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.outputEncoding = this.outputEncoding;\n\n    this.controls = new OrbitControls(this.camera, this.$el);\n    this.controls.type = 'orbit';\n\n    this.scene.add(this.wrapper);\n\n    this.load();\n    this.update();\n\n    this.$el.addEventListener('mousedown', this.onMouseDown, false);\n    this.$el.addEventListener('mousemove', this.onMouseMove, false);\n    this.$el.addEventListener('mouseup', this.onMouseUp, false);\n    this.$el.addEventListener('mousewheel', this.onMouseWheel, false);\n    this.$el.addEventListener('click', this.onClick, false);\n\n    window.addEventListener('resize', this.onResize, false);\n\n    this.animate();\n  },\n  beforeDestroy() {\n    cancelAnimationFrame(this.reqId);\n\n    this.renderer.dispose();\n\n    if (this.controls) {\n      this.controls.dispose();\n    }\n\n    this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n    this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n    this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n    this.$el.removeEventListener('mousewheel', this.onMouseWheel, false);\n    this.$el.removeEventListener('click', this.onClick, false);\n\n    window.removeEventListener('resize', this.onResize, false);\n  },\n  watch: {\n    src() {\n      this.load();\n    },\n    cameraRotation: {\n      deep: true,\n      handler(val) {\n        if (!this.camera) return;\n        this.camera.rotation.set(val.x, val.y, val.z);\n      },\n    },\n    cameraPosition: {\n      deep: true,\n      handler(val) {\n        if (!this.camera) return;\n        this.camera.position.set(val.x, val.y, val.z);\n      },\n    },\n    rotation: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.rotation.set(val.x, val.y, val.z);\n      },\n    },\n    position: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.position.set(val.x, val.y, val.z);\n      },\n    },\n    scale: {\n      deep: true,\n      handler(val) {\n        if (!this.object) return;\n        this.object.scale.set(val.x, val.y, val.z);\n      },\n    },\n    lights: {\n      deep: true,\n      handler() {\n        this.updateLights();\n      },\n    },\n    size: {\n      deep: true,\n      handler() {\n        this.updateCamera();\n        this.updateRenderer();\n      },\n    },\n    controlsOptions: {\n      deep: true,\n      handler() {\n        this.updateControls();\n      },\n    },\n    backgroundAlpha() {\n      this.updateRenderer();\n    },\n    backgroundColor() {\n      this.updateRenderer();\n    },\n  },\n  methods: {\n    onResize() {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight,\n          };\n        });\n      }\n    },\n    onMouseDown(event) {\n      if (!this.hasListener['on-mousedown']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousedown', { camera: this.camera, intersected });\n    },\n    onMouseMove(event) {\n      if (!this.hasListener['on-mousemove']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousemove', { camera: this.camera, intersected });\n    },\n    onMouseUp(event) {\n      if (!this.hasListener['on-mouseup']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mouseup', { camera: this.camera, intersected });\n    },\n    onMouseWheel(event) {\n      if (!this.hasListener['on-mousewheel']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-mousewheel', { camera: this.camera, intersected });\n    },\n    onClick(event) {\n      if (!this.hasListener['on-click']) return;\n\n      const intersected = this.pick(event.clientX, event.clientY);\n      this.$emit('on-click', { camera: this.camera, intersected });\n    },\n    pick(x, y) {\n      if (!this.object) return null;\n\n      const rect = this.$el.getBoundingClientRect();\n\n      x -= rect.left;\n      y -= rect.top;\n\n      this.mouse.x = (x / this.size.width) * 2 - 1;\n      this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n\n      const intersects = this.raycaster.intersectObject(this.object, true);\n\n      return (intersects && intersects.length) > 0 ? intersects[0] : null;\n    },\n    update() {\n      this.updateRenderer();\n      this.updateCamera();\n      this.updateLights();\n      this.updateControls();\n    },\n    updateModel() {\n      const { object } = this;\n\n      if (!object) return;\n\n      const { position } = this;\n      const { rotation } = this;\n      const { scale } = this;\n\n      object.position.set(position.x, position.y, position.z);\n      object.rotation.set(rotation.x, rotation.y, rotation.z);\n      object.scale.set(scale.x, scale.y, scale.z);\n    },\n    updateRenderer() {\n      const { renderer } = this;\n\n      renderer.setSize(this.size.width, this.size.height);\n      renderer.setPixelRatio(window.devicePixelRatio || 1);\n      renderer.setClearColor(new Color(this.backgroundColor).getHex());\n      renderer.setClearAlpha(this.backgroundAlpha);\n    },\n    updateCamera() {\n      const { camera } = this;\n      const { object } = this;\n\n      camera.aspect = this.size.width / this.size.height;\n      camera.updateProjectionMatrix();\n\n      if (!this.cameraLookAt && !this.cameraUp) {\n        if (!object) return;\n\n        const distance = getSize(object).length();\n\n        camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n        camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n\n        if (this.cameraPosition.x === 0 && this.cameraPosition.y === 0 && this.cameraPosition.z === 0) {\n          camera.position.z = distance;\n        }\n\n        camera.lookAt(new Vector3());\n      } else {\n        camera.position.set(this.cameraPosition.x, this.cameraPosition.y, this.cameraPosition.z);\n        camera.rotation.set(this.cameraRotation.x, this.cameraRotation.y, this.cameraRotation.z);\n        camera.up.set(this.cameraUp.x, this.cameraUp.y, this.cameraUp.z);\n\n        camera.lookAt(new Vector3(this.cameraLookAt.x, this.cameraLookAt.y, this.cameraLookAt.z));\n      }\n    },\n    updateLights() {\n      this.scene.remove(...this.allLights);\n\n      this.allLights = [];\n\n      this.lights.forEach((item) => {\n        if (!item.type) return;\n\n        const type = item.type.toLowerCase();\n\n        let light = null;\n\n        if (type === 'ambient' || type === 'ambientlight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0x404040;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new AmbientLight(color, intensity);\n        } else if (type === 'point' || type === 'pointlight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n          const distance = item.distance || 0;\n          const decay = item.decay === 0 ? item.decay : item.decay || 1;\n\n          light = new PointLight(color, intensity, distance, decay);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n        } else if (type === 'directional' || type === 'directionallight') {\n          const color = item.color === 0x000000 ? item.color : item.color || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new DirectionalLight(color, intensity);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n\n          if (item.target) {\n            light.target.copy(item.target);\n          }\n        } else if (type === 'hemisphere' || type === 'hemispherelight') {\n          const skyColor = item.skyColor === 0x000000 ? item.skyColor : item.skyColor || 0xffffff;\n          const groundColor = item.groundColor === 0x000000 ? item.groundColor : item.groundColor || 0xffffff;\n          const intensity = item.intensity === 0 ? item.intensity : item.intensity || 1;\n\n          light = new HemisphereLight(skyColor, groundColor, intensity);\n\n          if (item.position) {\n            light.position.copy(item.position);\n          }\n        }\n\n        this.allLights.push(light);\n        this.scene.add(light);\n      });\n    },\n    updateControls() {\n      if (this.controlsOptions) {\n        Object.assign(this.controls, this.controlsOptions);\n      }\n    },\n    load() {\n      if (!this.src) return;\n\n      if (this.object) {\n        this.wrapper.remove(this.object);\n      }\n\n      this.loader.setRequestHeader(this.requestHeader);\n      this.loader.load(this.src, (...args) => {\n        const object = this.getObject(...args);\n\n        if (this.process) {\n          this.process(object);\n        }\n\n        this.addObject(object);\n\n        this.$emit('on-load');\n      }, (xhr) => {\n        this.$emit('on-progress', xhr);\n      }, (err) => {\n        this.$emit('on-error', err);\n      });\n    },\n    getObject(object) {\n      return object;\n    },\n    addObject(object) {\n      const center = getCenter(object);\n\n      // correction position\n      this.wrapper.position.copy(center.negate());\n\n      this.object = object;\n      this.wrapper.add(object);\n\n      this.updateCamera();\n      this.updateModel();\n    },\n    animate() {\n      this.reqId = requestAnimationFrame(this.animate);\n      this.render();\n    },\n    render() {\n      this.renderer.render(this.scene, this.camera);\n    },\n  },\n};\n\n</script>\n"]}]}